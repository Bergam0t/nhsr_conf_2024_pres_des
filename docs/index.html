<!DOCTYPE html>
<html lang="en"><head>
<script src="nhsr_conf_2024_pres_des_files/libs/clipboard/clipboard.min.js"></script>
<script src="nhsr_conf_2024_pres_des_files/libs/quarto-html/tabby.min.js"></script>
<script src="nhsr_conf_2024_pres_des_files/libs/quarto-html/popper.min.js"></script>
<script src="nhsr_conf_2024_pres_des_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="nhsr_conf_2024_pres_des_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="nhsr_conf_2024_pres_des_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="nhsr_conf_2024_pres_des_files/libs/quarto-html/quarto-syntax-highlighting-dark-474c6d7e63be50eb6972897072b39b27.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="nhsr_conf_2024_pres_des_files/libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="nhsr_conf_2024_pres_des_files/libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.36">

  <meta name="author" content="Sammi Rosser">
  <title>Unleashing the Power of Pathway Simulation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="nhsr_conf_2024_pres_des_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="nhsr_conf_2024_pres_des_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="nhsr_conf_2024_pres_des_files/libs/revealjs/dist/theme/quarto-85c94780cc0b9b219664681fa49a48f9.css">
  <link href="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link href="https://fonts.googleapis.com/css?family=Lexend" rel="stylesheet">
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="banner.png" class="quarto-title-block center">
  <h1 class="title">Unleashing the Power of Pathway Simulation</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Sammi Rosser 
</div>
        <p class="quarto-title-affiliation">
            Health Service Modelling Associates Programme
          </p>
    </div>
</div>

</section>
<section id="about-me" class="slide level2">
<h2>About Me</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="resources/profile.jpg" alt="A picture of a woman riding a yellow mountain bike in the woods. The woman is wearing a white full-face helmet, a red and black cycling jersey with the letters 'TLD' on, and red and yellow leopard-print shorts, along with shin and elbow protection. There are large trees in the background, tape indicating the cycling course, and roots and rocks on the ground. The woman looks like she is concentrating."></p>
</div><div class="column" style="width:60%;">
<ul>
<li>Former NHS Analyst/Data Scientist</li>
<li>MSc Health Data Science @ Exeter</li>
<li>Now a HSMA trainer @ Exeter (<a href="https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/">PenCHORD</a>/<a href="https://arc-swp.nihr.ac.uk/">PenARC</a>)</li>
<li>Mainly a Pythonista these days<br>(but I ‚ù§Ô∏è R too)</li>
<li>Obsessed with Quarto, Streamlit, Simulation, Maps &amp; Dataviz</li>
</ul>
</div><p><a href="https://www.linkedin.com/in/sammijaderosser/"><i class="fa-brands fa-linkedin" aria-label="linkedin"></i> Add Me On LinkedIn</a></p><p><a href="https://github.com/Bergam0t"><i class="fa-brands fa-github" aria-label="github"></i> Follow Me On GitHub</a></p>
</div>
</section>
<section id="about-hsma" class="slide level2" data-menu-title="About HSMA">
<h2></h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="resources/hsma_logo.png" alt="A red logo of a computer monitor and horizontal computer tower underneath it, encased in a circle. Underneath the logo is the acronym 'HSMA' in bold white lettering. Beneath this is the phrase 'Find the Future in You'"></p>
<p><img data-src="resources/nihr_logo.png" alt="A white and orange logo saying 'NIHR - Applied Research Collaboration South West Peninsula'"></p>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:60%;">
<p>The Health Service Modelling Associates is a 15 month data science and operational research training and mentoring programme. <br><br> Supported by the NIHR PenARC and the NHS Digital Academy, the full programme is provided <strong>free of charge</strong> to people working in health, social care and policing and is accredited by AphA. <br><br></p>
<p><a href="https://hsma-programme.github.io/hsma_site/"><i class="fa-solid fa-globe" aria-label="globe"></i> Visit Our Website for Free Training</a></p>
<p><a href="https://www.youtube.com/@hsma"><i class="fa-brands fa-youtube" aria-label="youtube"></i> Subscribe to our YouTube Channel</a></p>
<p><a href="https://github.com/hsma-programme"><i class="fa-brands fa-github" aria-label="github"></i> Follow us on GitHub</a></p>
</div></div>
</section>
<section>
<section id="part-1-pathways" class="title-slide slide level1 center">
<h1>Part 1: Pathways</h1>

</section>
<section id="pathway-simulation-why" class="slide level2">
<h2>Pathway Simulation: Why?</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="resources/long_hospital_queue.jpeg" alt="A stylised image showing very long queues outside of a hospital building" height="400"></p>
</div><div class="column" style="width:60%;">
<p>Your emergency department is struggling.</p>
<p>You could try a range of different things‚Ä¶</p>
<div>
<ul>
<li class="fragment">increase the number of staff available to register, triage or treat</li>
<li class="fragment">increase the number of rooms or beds</li>
<li class="fragment">increase the rate at which tests can be processed</li>
</ul>
</div>
</div></div>
<div>
<ul>
<li class="fragment">add a new step in the process with a different kind of practitioner</li>
<li class="fragment">completely redesign the pathway</li>
</ul>
</div>
<div class="fragment center">
<p><strong>Which of these is the right answer?</strong></p>
</div>
</section>
<section id="queue-queue-barney-mcgrew" class="slide level2">
<h2>Queue, Queue, Barney McGrew</h2>
<p>Healthcare tends to be <strong>full</strong> of queueing problems like this one.</p>
<div>
<ul>
<li class="fragment">People attending a walk-in clinic or emergency department</li>
<li class="fragment">People calling a telephone-based service like 111 or a mental health crisis line</li>
<li class="fragment">People on a cancer diagnosis and treatment pathway</li>
<li class="fragment">People waiting to be assessed for ADHD and Autism, or on the waiting list for a gender clinic</li>
<li class="fragment">People waiting for a series of treatment with a mental health practitioner
<ul>
<li class="fragment">might have one, several or many appointments</li>
</ul></li>
</ul>
</div>
</section>
<section id="pathway-parts" class="slide level2">
<h2>Pathway Parts</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Healthcare systems are full of <strong>resources</strong></p>
<div>
<ul>
<li class="fragment">People üë©üèª‚Äç‚öïÔ∏è üë©üèø‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë©üèæ‚Äç‚öïÔ∏è</li>
<li class="fragment">Equipment üî¨ü©∫</li>
<li class="fragment">Rooms &amp; cubicles üè•</li>
<li class="fragment">Beds üõåüèª üõåüèΩ üõåüèø üõåüèª üõåüèº üõåüèΩ üõåüèø</li>
<li class="fragment">Treatments üíâ ü©π üíä</li>
<li class="fragment">Vehicles üöë üöÅ üöó</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p>These <strong>resources</strong> experience demand from <strong>entities</strong>.</p>
<p>These entities might be</p>
</div>
<div>
<ul>
<li class="fragment">People (in person) ü§í ü§¢ ü§ß</li>
<li class="fragment">People (on the phone) ‚òéÔ∏è</li>
<li class="fragment">Test Requests ü©ª üß™</li>
</ul>
</div>
</div></div>
</section>
<section id="pathways-and-queues" class="slide level2">
<h2>Pathways and Queues</h2>
<div class="columns">
<div class="column" style="width:23%;">
<p>As these entities move through a pathway - a series of steps where these resources are used - queues can build up where there isn‚Äôt enough resource.</p>
</div><div class="column" style="width:7%;">

</div><div class="column" style="width:70%;">
<p><img data-src="assets/2024-11-18-10-12-15.png" alt="A pathway showing several steps, starting with 'sign in with receptionist'. One person is signing in; one receptionist is in use and the other is available. A queue of 7 people is then waiting to be triaged. One person is being triaged bby the single available triage nurse. The pathway then splits; one person is seeing a nurse for treatment while two further nurses are available. There is no queue for this step. However, 8 people are waiting to be treated by the single available doctor, who is currently treating someone. People can then either be discharged, receive additional treatment from a nurse or doctor, or may require additional tests. One person is waiting for tests; one person is dealing with the tests while the other is idle. After these tests, people may be discharged, or may need to see a doctor or nurse again."></p>
</div></div>
</section>
<section id="queue-what" class="slide level2">
<h2>Queue What?</h2>
<br>
<p>And these pathways are often very <strong>complicated</strong>!</p>
<p>There are lots of moving parts, and lots of variation.</p>
<br>
<div class="columns">
<div class="column fragment" style="width:30%;">
<p><strong>Variation in when, and how frequently, people arrive</strong></p>
</div><div class="column" style="width:5%;">

</div><div class="column fragment" style="width:30%;">
<p><strong>Variation in how long an activity in the pathway takes</strong></p>
</div><div class="column" style="width:5%;">

</div><div class="column fragment" style="width:30%;">
<p><strong>Variation in the pathways people take within a single system</strong></p>
</div></div>
</section>
<section id="the-problem-with-pathways" class="slide level2">
<h2>The Problem with Pathways</h2>
<p>Making changes to pathways can be</p>
<ul>
<li>costly</li>
<li>slow</li>
<li>unsafe!</li>
</ul>
<div class="fragment">
<p>And even if you do fix the original problem you were trying to solve, there‚Äôs a risk of knock-on effects elsewhere in the pathway that you didn‚Äôt foresee.</p>
</div>
</section>
<section id="the-future-problems-with-pathways" class="slide level2">
<h2>The Future Problems with Pathways</h2>
<p>And even if you avoid that‚Ä¶.</p>
<p>A system that is coping now might <em>not</em> cope</p>
<div>
<ul>
<li class="fragment">all the time</li>
<li class="fragment">if demand increases</li>
<li class="fragment">if resource temporarily decreases</li>
</ul>
</div>
</section>
<section id="its-all-a-simulation" class="slide level2">
<h2>It‚Äôs All a Simulation</h2>
<p>On HSMA, we teach a couple of different <strong>computer simulation</strong> techniques.</p>
<div class="columns">
<div class="column fragment" style="width:27%;">
<h3 id="system-dynamics">System Dynamics</h3>
<p>High-level technique that‚Äôs often suited to uncovering fundamental issues with pathway or wider healthcare system design</p>
</div><div class="column fragment" style="width:5%;">
<div style="border-left:3px solid #fff;height:600px"></div>
</div><div class="column fragment" style="width:30%;">
<h3 id="agent-based-simulation-abs">Agent-Based Simulation (ABS)</h3>
<p>Individual-level modelling that is particularly interested in the impact of individuals‚Äô decisions and interactions</p>
</div><div class="column fragment" style="width:5%;">
<div style="border-left:3px solid #fff;height:600px">
</div>
</div><div class="column fragment" style="width:33%;">
<h3 id="discrete-event-simulation-des">Discrete Event Simulation (DES)</h3>
<p>Modelling focussing on the flow of entities through a pathway and use of resources, allowing detailed investigation of capacity, queues and waits</p>
</div></div>
</section>
<section id="its-our-destiny" class="slide level2">
<h2>It‚Äôs Our DEStiny</h2>
<div class="columns">
<div class="column" style="width:25%;">
<p><br><br> What we generally want to tackle our pathway problems in healthcare is <strong>Discrete Event Simulation (DES)</strong><br></p>
</div><div class="column" style="width:5%;">
<div style="border-left:3px solid #fff;height:700px"></div>
</div><div class="column" style="width:70%;">
<div class="center">
<p>In a DES‚Ä¶</p>
</div>
<p><img data-src="assets/2024-11-18-09-41-27.png" alt="The top row of this diagram says 'entities' and shows stylised 'emoji' representations of 5 ill people. The next row of the diagram says 'flow through a pathway' and shows a branching diagram of a healthcare pathway with the steps 'arrive', 'sign in with receptionist', 'triaged', 'see nurse', 'see doctor', 'additional tests', 'discharge'. Some steps are optional or may be repeated more than once - the specifics are not important as it is just an indication of what is meant by 'pathway' in this context. The final row says 'using resources along the way' and shows four doctors and three beds as an indication of what resources are in these context."></p>
</div></div>
</section>
<section id="des-to-the-rescue" class="slide level2">
<h2>DES to the Rescue</h2>
<p>DES is so powerful because it gives us an in-silico (computer-based) reproduction of our pathway to play around with. <br><br> We can make any change we want<br><em>(e.g.&nbsp;more resources, higher demand, new pathway design)</em><br><strong>safely and for free</strong> and see what impact it has on any metric we care to measure:</p>
<ul>
<li>how long people wait at each step of the pathway</li>
<li>people meeting targets (e.g.&nbsp;4 hour wait)</li>
<li>how much of the time the resources are utilised for</li>
</ul>
<br><br>
<p>And so on!</p>
</section>
<section id="randomness" class="slide level2">
<h2>Randomness</h2>
<p>That randomness in our healthcare systems that we mentioned before? DES can cope really well with that!</p>
<br>
<div class="columns fragment">
<div class="column" style="width:45%;">
<p>We can hold the random patterns consistent and <strong>change resource levels or pathway design</strong></p>
</div><div class="column" style="width:10%;">
<div style="border-left:3px solid #fff;height:250px"></div>
</div><div class="column" style="width:45%;">
<p>We can hold resources or pathway design consistent and <strong>allow randomness</strong></p>
</div></div>
<br>
<div class="columns fragment">
<div class="column" style="width:45%;">
<p>This allows us to be sure the changes we‚Äôre testing really are responsible for the differences</p>
</div><div class="column" style="width:10%;">
<div style="border-left:3px solid #fff;height:250px"></div>
</div><div class="column" style="width:45%;">
<p>This allows us to test our system in multiple parallel universes, running it <strong>tens</strong> or even <strong>hundreds</strong> of times!</p>
</div></div>
</section>
<section id="exploring-impacts" class="slide level2">
<h2>Exploring Impacts</h2>
<p>In our models, we can then summarise the performance of a given set of parameters across multiple runs.</p>

<img data-src="assets/2024-11-18-18-52-06.png" alt="A bar chart is shown that has 'Resource Utilisation (%)' on the vertical axis and 'Examination (Nurses)' and 'Treatment (Doctors)' on the horizontal axis. The 85 to 100% section is shown as red, 65 to 85% is shown as green, 40 to 65% is shown as amber, and 0 to 40% is again red. The examination (nurses) bar is at 100%, placing it in the red section for over-utilisation. The Treatment (Doctors) bar is at approximately 75%, placing it in the green section. A label shows at a quick glance that 1 of 2 utilisation metrics are in the ideal range in this simulation run." class="r-stretch"></section>
<section id="digging-into-results" class="slide level2">
<h2>Digging Into Results</h2>
<p>We can start to explore the variation in performance across runs too.</p>

<img data-src="assets/2024-11-18-18-52-30.png" alt="A box plot showing the utilisation of treatment (doctor) and examination (nurse) resources across multiple simulation runs. The horizontal axis shows the average % utilisation, from 0% to 100%. The 85 to 100% section is shown as red, 65 to 85% is shown as green, 40 to 65% is shown as amber, and 0 to 40% is again red. The box plot shows the average and spread of model runs, with all 15 model runs showing a doctor utilisation of between 65% and 80%, with the average around 75%, so all runs show average doctor utilisation in an acceptable range. However, you cannot see the variation for nurses, as all runs appear to be around 100%, strongly suggesting there is never enough nurse resource even on 'quiet' days in the model." class="r-stretch"></section>
<section id="comparing-performance" class="slide level2">
<h2>Comparing Performance</h2>
<p>And we can provide visualiations to compare the impact of changing parameters - here, for example, adding one extra stabilisation bay.</p>

<img data-src="assets/2024-11-18-18-54-56.png" alt="Two bar charts side-by-side indicating 'Utilisation' and 'Waits'. The horizontal axis for utilisation shows 0 to 100%. The 85 to 100% section is shown as red, 65 to 85% is shown as green, 40 to 65% is shown as amber, and 0 to 40% is again red. Treatment bays (trauma) and stabilisation bays are both in the red section, while treatment bays (non-trauma) are in the green section. Staggered bars show the average utilisation across two different scenarios. The second scenario shows slightly lower utilisation of both, but not enough to be in the green. The second graph shows 'waits' in minutes, with waits of below 120 minutes being green. Scenario 1 shows waits for stabilisation averaging over 300 minutes. Scenario 2 shows the waits decreasing to around 150 minutes on average. Waits for trauma treatment drop from 130 in scenario 1 to 50 in scenario 2." class="r-stretch"></section>
<section id="a-note-about-modelling" class="slide level2">
<h2>A Note About Modelling</h2>
<p>Your DES won‚Äôt be a perfect one-to-one reproduction of the pathway you are modelling.</p>
<p>We have to make certain assumptions and simplifications, and we can‚Äôt capture every complexity.</p>
<div class="columns">
<div class="column" style="width:45%;">
<p>However‚Ä¶</p>
<p><br><br></p>
<blockquote>
<p>All models are wrong, but some are useful</p>
</blockquote>
<p>‚Ä¢ George E. P. Box</p>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><img data-src="assets/box_pixel.jpeg" alt="A stylised colour illustration of an older man - intended to resemble the statistician George E P Box - sitting at a desk. The man has large round glasses, a large grey pointed moustache and grey hair. He is wearing a brown suit and waistcoat with a blue patterned tie. On the wall behind him are books, and on the table is a calculator, books and a clipboard. There are also graphs and charts on the wall and on a computer monitor on the desk." height="450"></p>
</div></div>
</section></section>
<section>
<section id="example-des-projects" class="title-slide slide level1 center">
<h1>Example DES Projects</h1>

</section>
<section id="des-is-popular" class="slide level2">
<h2>DES is popular!</h2>
<ul>
<li>On the HSMA programme, we‚Äôve had over 35 projects using DES in some capacity <br><br></li>
<li>A third of the registered projects this year use DES (as opposed to machine learning, ABS, system dynamics, natural language processing, geographical modelling) <br><br></li>
<li>It‚Äôs also frequently used in the <a href="https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/">PenCHORD</a> team</li>
</ul>
</section>
<section id="example-1-bladder-cancer-pathway" class="slide level2">
<h2>Example 1: Bladder Cancer Pathway</h2>
<p>In this <a href="https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/">PenCHORD</a> project, a DES model of the bladder cancer pathway at Royal Cornwall Hospitals Trust (RCHT) exposed two key system bottlenecks.</p>
<ul>
<li>A delay between patients being referred and receiving their surgery</li>
<li>A delay waiting for the nurse specialist to contact the patient to discuss their diagnosis and treatment options</li>
</ul>
<p>The model was used to support an on-the-spot rewrite of the pathway, resulting in multi-week reductions to waiting times. <br><br> <a href="https://arc-swp.nihr.ac.uk/research/projects/penchord-streamlining-the-bladder-cancer-pathway-at-rcht/"><i class="fa-solid fa-globe" aria-label="globe"></i> Find Out More</a></p>
</section>
<section id="example-2-vaccination-clinic" class="slide level2">
<h2>Example 2: Vaccination Clinic</h2>
<p>This <a href="https://hsma-programme.github.io/hsma_site/">HSMA</a> project looked at the design of a COVID-19 vaccination clinic in North Devon, exploring</p>
<ul>
<li>queue lengths</li>
<li>car park capacity</li>
<li>times for each step of the vaccination process</li>
</ul>
<p>The model identified potential issues with the original proposed plans, and was used to refine the plans to enable a safe but efficient delivery of the vaccination programme. <br><br> <a href="https://hsma-programme.github.io/hsma_site/previous_projects/hsma_3/h3_generic_vaccination/"><i class="fa-solid fa-globe" aria-label="globe"></i> Find Out More</a></p>
</section>
<section id="example-3-emergency-department-model" class="slide level2">
<h2>Example 3: Emergency Department Model</h2>
<p>This <a href="https://hsma-programme.github.io/hsma_site/">HSMA</a> project looked at ways to improve Urgent Treatment Care (UTC) performance. The team wanted to know</p>
<ul>
<li>What further staff and resources would be required for any variations in patient attendance</li>
<li>How changes in the patient pathway would reduce bottlenecks<br> (e.g what would be the impact of front-loading diagnostics?)</li>
</ul>
<p>The model identified a need for additional rooms and the ED was redesigned as a result. <br><br> <a href="https://hsma-programme.github.io/hsma_site/previous_projects/hsma_3/h3_generic_vaccination/"><i class="fa-solid fa-globe" aria-label="globe"></i> Find Out More</a></p>
</section>
<section id="example-4-mental-health-assessment-pathway-model" class="slide level2">
<h2>Example 4: Mental Health Assessment Pathway Model</h2>
<p>This <a href="https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/">PenCHORD</a> project created a simulation model of a mental health assessment pathway.</p>
<p>The trust in question was piloting an approach that would allow patients to book their appointments themselves.</p>
<p>The model was used to help</p>
<ul>
<li>predict the number of appointment slots required at each site</li>
<li>show that allowing queue-sharing between smaller groups of sites would significantly reduce the wait times</li>
</ul>
<p><a href="https://arc-swp.nihr.ac.uk/publications/scheduling-community-mental-health-assessment-in-devon/"><i class="fa-solid fa-globe" aria-label="globe"></i> Find Out More</a></p>
</section>
<section id="example-5-childrens-neurodiversity-assessment-pathway" class="slide level2">
<h2>Example 5: Children‚Äôs Neurodiversity Assessment Pathway</h2>
<p>This <a href="https://hsma-programme.github.io/hsma_site/">HSMA</a> project created a model of a paediatric neurodevelopmental (ADHD + autism) pathway. Waits had increased to a 2 years on average.</p>
<p>The team wanted to understand</p>
<ul>
<li>where current bottlenecks in the process were</li>
<li>what level of staffing would be needed to clear the existing backlog and maintain a steady state</li>
</ul>
<p>The model showed that recruiting an extra lead clinician would not address the bottleneck - but an additional second assessor would.</p>
<p><a href="https://hsma-programme.github.io/hsma_site/previous_projects/hsma_4/h4_des_adhd_autism_pathway/"><i class="fa-solid fa-globe" aria-label="globe"></i> Find Out More</a></p>
</section>
<section id="other-projects" class="slide level2">
<h2>Other Projects</h2>
<p>You can find details about all of our previous and current Discrete Event Simulation projects <a href="https://hsma-programme.github.io/hsma_site/previous_projects/projects_by_methods.html#discrete-event-simulation"><i class="fa-solid fa-globe" aria-label="globe"></i> on the HSMA website</a></p>

<img data-src="assets/cfN8dkSYNB.gif" alt="An animation of someone navigating through a page of projects on the HSMA website. They scroll down to a project on simulation and click on 'details' to receive more information and find a video on the project." class="r-stretch"></section></section>
<section>
<section id="doing-your-own-des-projects" class="title-slide slide level1 center">
<h1>Doing your Own DES Projects</h1>

</section>
<section id="the-des-playground" class="slide level2">
<h2>The DES Playground</h2>
<p>This site was designed to help teach the <strong>key concepts</strong> of discrete event simulation to non-technical beginners.</p>
<div class="columns">
<div class="column" style="width:80%;">
<p><img data-src="assets/chrome_2RNEIsSXoP.gif" alt="An animation showing a web interface for a discrete event simulation model. An animated representation of people moving through a two-step examination and treatment pathway is displayed, with queues at those different stages shown. The user thn moves to a series of simple bar charts showing metrics, and a series of more advanced box plots to show variation across multiple runs of the simulation."></p>
</div><div class="column" style="width:20%;">
<p><a href="https://hsma-programme.github.io/Teaching_DES_Concepts_Streamlit"><i class="fa-solid fa-globe" aria-label="globe"></i> &nbsp; Click here to visit!</a></p>
<p><br></p>
<p>It uses browser-based Python, so calculations can be slow on mobile devices and won‚Äôt work on Firefox!</p>
</div></div>
</section>
<section id="drag-drop" class="slide level2">
<h2>Drag &amp; Drop</h2>
<p>There are various paid, closed-source drag-and-drop software tools for doing DES (but we won‚Äôt talk about them here).</p>
<p>If you don‚Äôt code, there is the free and open source (FOSS) tool <a href="https://jaamsim.com/">JaamSim</a>.</p>
<p><img data-src="assets/2024-11-18-10-15-22.png">{fig-alt=‚ÄúA screenshot showing the homepage of the website for the JaamSim software. It contains a link to download the software for free, as well as a video showing the use of the software and some key information about the features of the software‚Äù.}</p>
</section>
<section id="des-in-r" class="slide level2">
<h2>DES in R</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="resources/simmer-hex-01.svg" alt="The logo for the simmer R package. It is a yellow hexagon with a darker yellow border, with the word 'simmer' at the bottom and a simple black mug containing a spoon and three white dots." height="500"></p>
</div><div class="column" style="width:40%;">
<p><br><br></p>
<p>R has the <a href="https://r-simmer.org/">simmer</a> package.</p>
</div></div>
</section>
<section id="des-in-python" class="slide level2">
<h2>DES in Python</h2>
<p>In Python, there are a range of packages for DES.</p>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="assets/2024-11-18-10-19-04.png" alt="The logo for the Salabim simulation package. It is the text 'salabim' in a curly, stylised red font. In smaller text below this, it says 'discete event simulation'."></p>
</div><div class="column" style="width:60%;">
<p><a href="https://github.com/salabim/salabim">Salabim</a> is quite popular.</p>
</div></div>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="assets/2024-11-18-10-16-14.png" alt="The logo for the ciw package. It says 'Ciw' in simple white font on a yellow background, and below it has a white circle. To the left of the circle is a rectangle missing the leftmost edge, and several smaller complete rectangles within it at the rightmost end."></p>
</div><div class="column" style="width:60%;">
<p>I‚Äôve also heard good things about <a href="https://github.com/CiwPython/Ciw">ciw</a></p>
</div></div>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="assets/2024-11-18-10-17-01.png" alt="The logo for the simpy package. It is the text 'SimPy' in green and grey, with the top of the S stylised as the head of a snake and the bottom as a cog."></p>
</div><div class="column" style="width:60%;">
<p>But HSMA has used and taught <a href="https://simpy.readthedocs.io/en/latest/">simpy</a> for several years. It‚Äôs mature, stable, reliable and flexible.</p>
</div></div>
</section>
<section id="hsma-training-on-des" class="slide level2 smaller">
<h2>HSMA Training on DES</h2>
<p>The DES lectures and activities from this year‚Äôs HSMA can be found on our website.</p>
<p><a href="https://hsma-programme.github.io/hsma_site/hsma_content/modules/current_module_details/2_des.html"><i class="fa-solid fa-globe" aria-label="globe"></i> Module Link</a></p>
<div class="columns">
<div class="column" style="width:30%;">
<h3 id="intro-to-des">Intro to DES</h3>
<p>‚Ä¢ What DES is and where it may be useful</p>
<p>‚Ä¢ The key terminology associated with DES e.g.&nbsp;resources, entities, sinks</p>
<p>‚Ä¢ How to simplify a real-world pathway modelling problem into a conceptual model</p>
</div><div class="column" style="width:5%;">

</div><div class="column fragment" style="width:30%;">
<h3 id="simpy-for-des">SimPy for DES</h3>
<p>‚Ä¢ The features of the SimPy package</p>
<p>‚Ä¢ How to write simple simulations with SimPy</p>
<p>‚Ä¢ Multi-step pathways</p>
<p>‚Ä¢ Branching pathways and optional steps</p>
</div><div class="column" style="width:5%;">

</div><div class="column fragment" style="width:30%;">
<h3 id="advanced-simpy">Advanced Simpy</h3>
<p>‚Ä¢ Warm-up Periods</p>
<p>‚Ä¢ Priority-based Queuing</p>
<p>‚Ä¢ Resource Unavailability</p>
<p>‚Ä¢ Lognormal Distributions</p>
<p>‚Ä¢ Reneging</p>
<p>‚Ä¢ Balking</p>
<p>‚Ä¢ Jockeying</p>
</div></div>
</section>
<section id="the-little-book-of-des" class="slide level2">
<h2>The Little Book of DES</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="resources/des_cover_image.jpeg" alt="An illustration of a woman with brown hair sitting at a desk and working on a computer with a globe on the screen. In the background is a futuristic scene showing a modern cityscape and the curvature of the earth, as though she is on a space station."></p>
<p><a href="https://hsma-programme.github.io/hsma6_des_book/"><i class="fa-solid fa-globe" aria-label="globe"></i> &nbsp; Click here to view the eBook</a></p>
</div><div class="column" style="width:50%;">
<p>We have also put together a <strong>free eBook</strong> that serves as a handy reference to doing DES with SimPy.</p>
<p>It‚Äôs packed with code snippets you can use and modify and goes beyond the lecture content, including</p>
<p>‚Ä¢ appointment-based models</p>
<p>‚Ä¢ reproducibility</p>
<p>‚Ä¢ parallelisation</p>
<p>‚Ä¢ and more!</p>
</div></div>
</section>
<section id="hsma-training-on-web-app-interfaces-for-des" class="slide level2 smaller">
<h2>HSMA Training on Web App Interfaces for DES</h2>
<div class="columns">
<div class="column" style="width:23%;">
<p>While creating these models and running a range of parameters yourself can be really powerful, getting the models into the hands of stakeholders can really enhance their adoption. <br><br> Frameworks like <a href="https://streamlit.io/">Streamlit</a> can help you to quickly create interactive web app front-ends for your app.</p>
</div><div class="column" style="width:3%;">

</div><div class="column" style="width:74%;">
<p><img data-src="assets/chrome_CdAZUpS295.gif" alt="An animation of a simulation model web interface, showing a user changing simulation parameters using sliders"></p>
</div></div>
</section>
<section id="the-hsma-book-of-streamlit" class="slide level2">
<h2>The HSMA Book of Streamlit</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="resources/streamlit_cover_image.jpeg" alt="A book cover, showing a robot surfing on a wave made of numbers"></p>
</div><div class="column" style="width:50%;">
<p>This free eBook walks you through a range of Streamlit concepts. <br><br> It then goes on to providing a walk-through of how to create a simple front-end for any DES and deploying that on a free online hosting platform.</p>
</div></div>
<p><a href="https://bergam0t.github.io/streamlit_book/"><i class="fa-solid fa-globe" aria-label="globe"></i> &nbsp; Click here to view the eBook</a></p>
</section>
<section id="pathway-visualisation" class="slide level2">
<h2>Pathway Visualisation</h2>
<p>As part of creating the DES playground, I put together the visualisation you saw in the previous slide. <br><br> It really resonated with people - so we wanted to make more use of it! <br><br> We know that one of the big limitations of simpy (and other FOSS code-based options) is not being able to produce <strong>quick and simple</strong> visualisations to show to stakeholders.</p>
</section>
<section id="the-vidigi-package" class="slide level2">
<h2>The vidigi package</h2>
<p>The <a href="https://pypi.org/project/vidigi/"><strong>vidigi</strong></a> package is designed to be a flexible library for creating these animated visualisations for <strong>any</strong> simulation.</p>
<p>Under the hood, it makes use of <a href="https://plotly.com/python/">Plotly‚Äôs</a> animated scatterplots.</p>
<p>However, it adds a range of additional helper functions to</p>
<ul>
<li>process event logs into the format required</li>
<li>lay out the animation</li>
<li>add icons for resources and entities</li>
</ul>
<p>It‚Äôs hosted on PyPI - so you can <code>pip install</code> it!</p>
<div id="581ccbe0" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a>pip install vidigi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="moving-from-this" class="slide level2">
<h2>Moving from this‚Ä¶</h2>

<img data-src="assets/firefox_mrlo2ZZy2D.gif" alt="An animation showing red dots moving across a flat plane. The passing of time is shown." class="r-stretch"></section>
<section id="to-this" class="slide level2">
<h2>‚Ä¶ to this</h2>

<img data-src="assets/firefox_WQjMAS0YvL.gif" alt="An animation showing the movement of people through an emergency department or walk-in clinic. Queues build up in named sections of the animation, and the number of available resources at each step are indicated, with thhe individual people icons moving to a resource to show they are making use of it. Resources relate to steps including triage rooms, stabilisation bays, treatment cubicles, registration cubicles, examination bays and treatment cubicles. Time passes in the animation, showing how queues may ebb and flow at different times of day and where unacceptable queues may build up." class="r-stretch"></section>
<section id="simulation-library" class="slide level2">
<h2>Simulation Library</h2>
<div class="callout callout-warning no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p>This is an early-stage piece of work!</p>
</div>
</div>
</div>
<p>To go along with vidigi, I‚Äôm working on collating and visualising models from across healthcare systems.</p>
<p>At present, there is</p>
<ul>
<li>A simple emergency department</li>
<li>An orthopaedic surgery unit</li>
<li>A simple community-based service with a single appointment</li>
<li>A complex community-based service with varying numbers of appointments and a per-clinician caseload</li>
</ul>
<p><a href="https://github.com/hsma-programme/simpy_visualisation/tree/main/examples"><i class="fa-brands fa-github" aria-label="github"></i> &nbsp; Click here for the code repository</a></p>
<p><a href="https://simpy-visualisation.streamlit.app/"><i class="fa-solid fa-globe" aria-label="globe"></i> &nbsp; Click here to try them out</a></p>
</section>
<section id="model-reproducibility" class="slide level2">
<h2>Model Reproducibility</h2>

<img data-src="resources/stars.png" alt="A five-pointed logo comprised of arrows relating to the STARS initiative. The image includes details of what STARS stands for in this context: Sharing Tools and Artefacts for Reproducible Simulations in healthcare" class="r-stretch"><p>Reproducibility and reusability of models is crucial.</p>
<p>I want to take a moment to highlight <a href="https://github.com/pythonhealthdatascience">STARS</a></p>
<p>This is a <a href="https://gtr.ukri.org/projects?ref=MR%2FZ503915%2F1">UKRI-funded project</a> that is trying to ensure good reproducibility of healthcare simulation models.</p>
<p>They are also creating examples in Python and R, as well as creating open-source versions of closed-source models from published scientific papers.</p>
</section>
<section id="the-stars-framework" class="slide level2 smaller">
<h2>The STARS Framework</h2>
<br>
<div class="columns">
<div class="column" style="width:45%;">
<h4 id="essential-components">Essential Components</h4>
<ul>
<li>Open license</li>
<li>Dependency management</li>
<li>Model created using free and open-source software (FOSS)</li>
<li>Minimum documentation</li>
<li>Research artefact meta data (ORCID ID + citation information)</li>
<li>Remote code repository</li>
<li>Open science archive</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<h4 id="optional-components">Optional Components</h4>
<ul>
<li>Enhanced documentation</li>
<li>Documentation hosting</li>
<li>Online coding environment</li>
<li>Model interface</li>
<li>Web app hosting</li>
</ul>
</div></div>
</section></section>
<section>
<section id="end-of-simulation" class="title-slide slide level1 center">
<h1>End of Simulation</h1>

</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<ul>
<li>DES is an amazing option for tackling your pathway problems <br><br></li>
<li>With ever-growing resources and community experience out there, it‚Äôs a great time to get started <br><br></li>
<li>FOSS libraries allow us to adapt and reuse models - but follow guidance to make it as easy as possible for people to stand on your shoulders!</li>
</ul>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="nhsr_conf_2024_pres_des_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 100,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1250,

        height: 800,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>