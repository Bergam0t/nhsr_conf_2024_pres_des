{"title":"Unleashing the Power of Pathway Simulation","markdown":{"yaml":{"title":"Unleashing the Power of Pathway Simulation","author":{"name":"Sammi Rosser","affiliation":"Health Service Modelling Associates Programme"},"format":{"revealjs":{"view-distance":100,"height":800,"width":1250,"transition":"slide","plotly-connected":true,"background-transition":"fade","theme":["default","custom.scss"],"title-slide-attributes":{"data-background-image":"/resources/banner.png"},"include-in-header":[{"text":"<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\"><link href='https://fonts.googleapis.com/css?family=Lexend' rel='stylesheet'>\n"}]}}},"headingText":"About Me","containsRefs":false,"markdown":"\n\n\n```{python}\n#| output: false\nimport plotly\nimport plotly.io as pio\npio.renderers.default = \"plotly_mimetype+notebook_connected\"\n```\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n![](resources/profile.jpg)\n:::\n\n::: {.column width=\"60%\"}\n- Former NHS Analyst/Data Scientist\n- MSc Health Data Science @ Exeter\n- Now a HSMA trainer\n- Mainly a Pythonista these days<br/>(but I ‚ù§Ô∏è R too)\n- Obsessed with Quarto, Streamlit, Simulation, Maps & Dataviz\n:::\n\n[{{< fa brands linkedin >}} Add Me On LinkedIn](https://www.linkedin.com/in/sammijaderosser/)\n\n[{{< fa brands github >}} Follow Me On GitHub](https://github.com/Bergam0t)\n\n::::\n\n## {.center}\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n![](resources/hsma_logo.png)\n:::\n\n::: {.column width=\"10%\"}\n:::\n\n::: {.column width=\"50%\" }\n\n\n```{=html}\n</br>\n```\n::: {.r-fit-text}\nThe Health Service Modelling Associates is a 15 month data science and operational research training and mentoring programme.\n\nSupported by the NIHR PenARC and the NHS Digital Academy, the full programme is provided **free of charge** to people working in health, social care and policing and is accredited by AphA.\n```{=html}\n</br>\n```\n![](resources/nihr_logo.png)\n:::\n\n:::\n\n::::\n\n[{{< fa globe >}} Visit Our Website for Free Training](https://hsma-programme.github.io/hsma_site/)\n\n[{{< fa brands youtube >}} Subscribe to our YouTube Channel](https://www.youtube.com/@hsma)\n\n[{{< fa brands github >}} Follow us on GitHub](https://github.com/hsma-programme)\n\n## Queue, Queue, Barney McGrew\n\nHealthcare tends to be **full** of queueing problems.\n\n::: {.incremental}\n- People attending a walk-in clinic or emergency department\n- People calling a telephone-based service like 111 or a mental health crisis line\n- People on a cancer diagnosis and treatment pathway\n- People waiting to be assessed for ADHD and Autism, or on the waiting list for a gender clinic\n- People waiting for a series of treatment with a mental health practitioner\n    - might have one, several or many appointments\n:::\n\n## Queue What?\n\n```{=html}\n<br/>\n```\n\nThese queues are **complicated**!\n\nThere are lots of moving parts, and lots of variation.\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n::: {.column width=\"30%\" .fragment}\n**Variation in when, and how frequently, people arrive**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in how long something takes to do**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in the pathways people take within a single system**\n:::\n\n\n::::\n\n## Very Resourceful\n\nHealthcare systems are full of **resources**\n\n::: {.incremental}\n- People üë©üèª‚Äç‚öïÔ∏è üë©üèø‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë©üèæ‚Äç‚öïÔ∏è\n- Equipment üî¨ü©∫\n- Rooms & cubicles üè•\n- Beds üõåüèª üõåüèΩ üõåüèø üõåüèª üõåüèº üõåüèΩ üõåüèø\n- Treatments üíâ ü©π üíä\n- Vehicles üöë üöÅ üöó\n:::\n\n## So Demanding\n\nThere is **demand** from **entities** in the form of\n\n::: {.incremental}\n- People (in person) ü§í ü§¢ ü§ß\n- People (on the phone) ‚òéÔ∏è\n- Test Requests ü©ª üß™\n:::\n\n## Pathway Simulation: Why?\n\n:::: {.columns}\n\n:::{.column width=\"35%\"}\n![](resources/long_hospital_queue.jpeg){height=350px}\n:::\n\n:::{.column width=\"65%\"}\nYour emergency department is struggling.\n\nYou could try a range of different things...\n\n::: {.incremental}\n- increase the number of staff available to register, triage or treat\n- increase the number of rooms or beds\n:::\n\n:::\n\n::::\n\n:::{.incremental}\n- increase the rate at which tests can be processed\n- add a new step in the process with a different kind of practitioner\n- completely redesign of the pathway\n:::\n\n:::{.fragment .center}\n**Which of these is the right answer?**\n:::\n\n## Pathway Simulation: Why?\n\nFinding out which of these is a good option can be\n\n- costly\n- slow\n- unsafe!\n\n\n:::{.fragment}\nAnd even if you do fix the original problem, there's a risk of knock-on effects elsewhere in the pathway that you didn't foresee.\n:::\n\n## Pathway Simulation: Why?\n\nAnd even if you avoid that....\n\nA system that is coping now might *not* cope\n\n:::{.incremental}\n- all the time\n- if demand increases\n- if resource temporarily decreases\n:::\n\n\n## It's All a Simulation\n\nOn HSMA, we teach a couple of different techniques for modelling, all of which could be applied to pathways.\n\n:::: {.columns}\n\n::: {.column width=\"30%\" .fragment}\n**System Dynamics**\n\nHigh-level modelling technique that's often suited to uncovering fundamental issues with pathway or wider healthcare system design\n:::\n\n::: {.column width=\"5%\" .fragment}\n<div style=\"border-left:3px solid #fff;height:500px\"></div>\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Agent-Based Simulation**\n\nIndividual-level modelling that is particularly interested in the impact of individual decisions on pathways and outcomes\n:::\n\n::: {.column width=\"5%\" .fragment}\n<div style=\"border-left:3px solid #fff;height:500px\"></div>\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Discrete Event Simulation**\n\nIndividual-level modelling focussing on the flow of entities through a pathway and their use of resources, allowing the investigation of capacity, queues and waits\n:::\n\n::::\n\n::: {.fragment}\n\n:::\n\n## Discrete Event Simulation Nation\n\nToday, I'm going to focus on Discrete Event Simulation (DES)<br/>(but you might want to look up more about the others too!)\n\n## What is DES?\n![](assets/2024-11-18-09-41-27.png)\n\n##\n\n![](assets/2024-11-18-10-12-15.png)\n\n## Why DES?\n\nDES fits our pathway modelling needs in healthcare really well.\n\n## Example 1: Bladder Cancer Pathway\n\n\n## Example 2: Vaccination Clinic\n\n\n## Example 3: Children's Neurodiversity Assessment Pathway\n\n\n## A Handy Thing to Remember\n\n\n## Getting Started\n\nThere are paid, closed-source software tools for doing DES (but we won't talk about them here).\n\n## Drag & Drop: JaamSim\n\nIf you don't code, there is the free and open source (FOSS) tool JaamSim.\n\n![](assets/2024-11-18-10-15-22.png)\n\n## DES in Python\n\nIn Python, there are a range of packages for DES.\n\n::::{.columns}\n\n:::{.column width=40%}\n![](assets/2024-11-18-10-19-04.png)\n:::\n\n:::{.column width=60%}\n[Salabim](https://github.com/salabim/salabim) is quite popular.\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n![](assets/2024-11-18-10-16-14.png)\n:::\n\n:::{.column width=60%}\nI've also heard good things about [ciw](https://github.com/CiwPython/Ciw)\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n![](assets/2024-11-18-10-17-01.png)\n:::\n\n:::{.column width=60%}\nBut HSMA has used and taught [simpy](https://simpy.readthedocs.io/en/latest/) for several years. It's mature, stable, reliable and flexible.\n:::\n\n::::\n\n## DES in R\n\n::::{.columns}\n\n:::{.column width=60%}\n![](resources/simmer-hex-01.svg)\n:::\n\n:::{.column width=40%}\nR has the [simmer](https://r-simmer.org/) package.\n:::\n\n::::\n\n## HSMA Training on DES {.smaller}\n\n[{{< fa globe >}} Module Link](https://hsma-programme.github.io/hsma_site/hsma_content/modules/current_module_details/2_des.html)\n\n:::: {.columns}\n\n::: {.column width=\"30%\"}\n### Intro to DES\n\n- What DES is and where it may be useful\n- The key terminology associated with DES (e.g. resources, entities, sinks)\n- How to simplify a real-world pathway modelling problem into a conceptual model\n:::\n\n::: {.column width=\"5%\"}\n\n:::\n\n\n::: {.column width=\"30%\" .fragment}\n### SimPy for DES\n\n- The features of the SimPy package\n- How to write simple simulations with SimPy\n- Multi-step pathways\n- Branching pathways and optional steps\n:::\n\n::: {.column width=\"5%\"}\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n### Advanced Simpy\n\n- Warm-up Periods\n- Priority-based Queuing\n- Resource Unavailability\n- Lognormal Distributions\n- Reneging\n- Balking\n- Jockeying\n:::\n\n::::\n\n\n\n## The Little Book of DES\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n![](resources/des_cover_image.jpeg)\n:::\n\n::: {.column width=\"50%\"}\n\n:::\n\n::::\n\n[{{< fa globe>}} &nbsp; Click here to view the Little Book of DES](https://hsma-programme.github.io/hsma6_des_book/)\n\n## HSMA Training on web app interfaces with DES {.smaller}\n\n\n## The HSMA Book of Streamlit\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n![](resources/streamlit_cover_image.jpeg)\n:::\n\n::: {.column width=\"50%\"}\n\n:::\n\n::::\n\n[{{< fa globe>}} &nbsp; Click here to view the HSMA Book of Streamlit](https://bergam0t.github.io/streamlit_book/)\n\n\n## The HSMA Book of Streamlit\n\nThe book walks you through a range of Streamlit concepts, as well as providing a walk-through of how to create a simple front-end for any DES.\n\n![](assets/2024-11-18-09-26-40.png)\n\n## The DES Playground\n\n\n## Pathway Visualisation\n\nAs part of creating the DES playground, I put together the visualisation you saw in the previous slide.\n\nIt really resonated with people at the open day\n\nWe know that one of the big limitations of simpy (and other FOSS code-based options) is not being able to produce quick and simple visualisations to show to stakeholders.\n\n\n## The vidigi package\n\nThe [**vidigi**]() package is designed to be a flexible library for creating these animated visualisations for **any** simulation.\n\nUnder the hood, it makes use of plotly's animated scatterplots.\n\nHowever, it adds a range of additional helper functions to\n- process event logs into the format required\n- lay out the animation\n- add icons for resources and entities\n\n## Moving from this...\n\n```{python}\n#| output: false\nfrom examples.example_2_branching_multistep.ex_2_model_classes import Trial, g, event_position_df\nfrom vidigi.animation import animate_activity_log\nimport pandas as pd\n\n\ng.arrival_df = \"examples/example_2_branching_multistep/ed_arrivals.csv\"\n\nmy_trial = Trial()\nresult = my_trial.run_trial()\n```\n\n```{python}\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=True,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=24,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        custom_entity_icon_list=[\"üî¥\"],\n        custom_resource_icon=\"\"\n    )\n\nfig.show()\n```\n\n## ... to this\n\n```{python}\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=False,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=12,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        add_background_image=\"examples/example_2_branching_multistep/Full Model Background Image - Horizontal Layout.drawio.png\",\n    )\n\nfig.write_html(\"full_plot.html\", auto_play=True)\n```\n\n```{=html}\n\n```\n\n## Simulation Library\n\n\n\n\n\n## The STARS Framework\n\n![](resources/stars.png)\n\nReproducibility and reusability of models is crucial.\n\nI want to take a moment to highlight [STARS](https://github.com/pythonhealthdatascience)\n\nThis is a [UKRI-funded project](https://gtr.ukri.org/projects?ref=MR%2FZ503915%2F1) that is trying to ensure good reproducibility of healthcare simulation models.\n\n## The STARS Framework {.smaller}\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n:::  {.column width=\"45%\"}\n#### Essential Components\n\n- Open license\n- Dependency management\n- Model created using free and open-source software (FOSS)\n- Minimum documentation\n- Research artefact meta data (ORCID ID + citation information)\n- Remote code repository\n- Open science archive\n:::\n\n:::  {.column width=\"10%\"}\n\n:::\n\n:::  {.column width=\"45%\"}\n#### Optional Components\n\n- Enhanced documentation\n- Documentation hosting\n- Online coding environment\n- Model interface\n- Web app hosting\n:::\n\n::::\n\n\n## Summary\n","srcMarkdownNoYaml":"\n\n## About Me\n\n```{python}\n#| output: false\nimport plotly\nimport plotly.io as pio\npio.renderers.default = \"plotly_mimetype+notebook_connected\"\n```\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n![](resources/profile.jpg)\n:::\n\n::: {.column width=\"60%\"}\n- Former NHS Analyst/Data Scientist\n- MSc Health Data Science @ Exeter\n- Now a HSMA trainer\n- Mainly a Pythonista these days<br/>(but I ‚ù§Ô∏è R too)\n- Obsessed with Quarto, Streamlit, Simulation, Maps & Dataviz\n:::\n\n[{{< fa brands linkedin >}} Add Me On LinkedIn](https://www.linkedin.com/in/sammijaderosser/)\n\n[{{< fa brands github >}} Follow Me On GitHub](https://github.com/Bergam0t)\n\n::::\n\n## {.center}\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n![](resources/hsma_logo.png)\n:::\n\n::: {.column width=\"10%\"}\n:::\n\n::: {.column width=\"50%\" }\n\n\n```{=html}\n</br>\n```\n::: {.r-fit-text}\nThe Health Service Modelling Associates is a 15 month data science and operational research training and mentoring programme.\n\nSupported by the NIHR PenARC and the NHS Digital Academy, the full programme is provided **free of charge** to people working in health, social care and policing and is accredited by AphA.\n```{=html}\n</br>\n```\n![](resources/nihr_logo.png)\n:::\n\n:::\n\n::::\n\n[{{< fa globe >}} Visit Our Website for Free Training](https://hsma-programme.github.io/hsma_site/)\n\n[{{< fa brands youtube >}} Subscribe to our YouTube Channel](https://www.youtube.com/@hsma)\n\n[{{< fa brands github >}} Follow us on GitHub](https://github.com/hsma-programme)\n\n## Queue, Queue, Barney McGrew\n\nHealthcare tends to be **full** of queueing problems.\n\n::: {.incremental}\n- People attending a walk-in clinic or emergency department\n- People calling a telephone-based service like 111 or a mental health crisis line\n- People on a cancer diagnosis and treatment pathway\n- People waiting to be assessed for ADHD and Autism, or on the waiting list for a gender clinic\n- People waiting for a series of treatment with a mental health practitioner\n    - might have one, several or many appointments\n:::\n\n## Queue What?\n\n```{=html}\n<br/>\n```\n\nThese queues are **complicated**!\n\nThere are lots of moving parts, and lots of variation.\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n::: {.column width=\"30%\" .fragment}\n**Variation in when, and how frequently, people arrive**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in how long something takes to do**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in the pathways people take within a single system**\n:::\n\n\n::::\n\n## Very Resourceful\n\nHealthcare systems are full of **resources**\n\n::: {.incremental}\n- People üë©üèª‚Äç‚öïÔ∏è üë©üèø‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë©üèæ‚Äç‚öïÔ∏è\n- Equipment üî¨ü©∫\n- Rooms & cubicles üè•\n- Beds üõåüèª üõåüèΩ üõåüèø üõåüèª üõåüèº üõåüèΩ üõåüèø\n- Treatments üíâ ü©π üíä\n- Vehicles üöë üöÅ üöó\n:::\n\n## So Demanding\n\nThere is **demand** from **entities** in the form of\n\n::: {.incremental}\n- People (in person) ü§í ü§¢ ü§ß\n- People (on the phone) ‚òéÔ∏è\n- Test Requests ü©ª üß™\n:::\n\n## Pathway Simulation: Why?\n\n:::: {.columns}\n\n:::{.column width=\"35%\"}\n![](resources/long_hospital_queue.jpeg){height=350px}\n:::\n\n:::{.column width=\"65%\"}\nYour emergency department is struggling.\n\nYou could try a range of different things...\n\n::: {.incremental}\n- increase the number of staff available to register, triage or treat\n- increase the number of rooms or beds\n:::\n\n:::\n\n::::\n\n:::{.incremental}\n- increase the rate at which tests can be processed\n- add a new step in the process with a different kind of practitioner\n- completely redesign of the pathway\n:::\n\n:::{.fragment .center}\n**Which of these is the right answer?**\n:::\n\n## Pathway Simulation: Why?\n\nFinding out which of these is a good option can be\n\n- costly\n- slow\n- unsafe!\n\n\n:::{.fragment}\nAnd even if you do fix the original problem, there's a risk of knock-on effects elsewhere in the pathway that you didn't foresee.\n:::\n\n## Pathway Simulation: Why?\n\nAnd even if you avoid that....\n\nA system that is coping now might *not* cope\n\n:::{.incremental}\n- all the time\n- if demand increases\n- if resource temporarily decreases\n:::\n\n\n## It's All a Simulation\n\nOn HSMA, we teach a couple of different techniques for modelling, all of which could be applied to pathways.\n\n:::: {.columns}\n\n::: {.column width=\"30%\" .fragment}\n**System Dynamics**\n\nHigh-level modelling technique that's often suited to uncovering fundamental issues with pathway or wider healthcare system design\n:::\n\n::: {.column width=\"5%\" .fragment}\n<div style=\"border-left:3px solid #fff;height:500px\"></div>\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Agent-Based Simulation**\n\nIndividual-level modelling that is particularly interested in the impact of individual decisions on pathways and outcomes\n:::\n\n::: {.column width=\"5%\" .fragment}\n<div style=\"border-left:3px solid #fff;height:500px\"></div>\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Discrete Event Simulation**\n\nIndividual-level modelling focussing on the flow of entities through a pathway and their use of resources, allowing the investigation of capacity, queues and waits\n:::\n\n::::\n\n::: {.fragment}\n\n:::\n\n## Discrete Event Simulation Nation\n\nToday, I'm going to focus on Discrete Event Simulation (DES)<br/>(but you might want to look up more about the others too!)\n\n## What is DES?\n![](assets/2024-11-18-09-41-27.png)\n\n##\n\n![](assets/2024-11-18-10-12-15.png)\n\n## Why DES?\n\nDES fits our pathway modelling needs in healthcare really well.\n\n## Example 1: Bladder Cancer Pathway\n\n\n## Example 2: Vaccination Clinic\n\n\n## Example 3: Children's Neurodiversity Assessment Pathway\n\n\n## A Handy Thing to Remember\n\n\n## Getting Started\n\nThere are paid, closed-source software tools for doing DES (but we won't talk about them here).\n\n## Drag & Drop: JaamSim\n\nIf you don't code, there is the free and open source (FOSS) tool JaamSim.\n\n![](assets/2024-11-18-10-15-22.png)\n\n## DES in Python\n\nIn Python, there are a range of packages for DES.\n\n::::{.columns}\n\n:::{.column width=40%}\n![](assets/2024-11-18-10-19-04.png)\n:::\n\n:::{.column width=60%}\n[Salabim](https://github.com/salabim/salabim) is quite popular.\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n![](assets/2024-11-18-10-16-14.png)\n:::\n\n:::{.column width=60%}\nI've also heard good things about [ciw](https://github.com/CiwPython/Ciw)\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n![](assets/2024-11-18-10-17-01.png)\n:::\n\n:::{.column width=60%}\nBut HSMA has used and taught [simpy](https://simpy.readthedocs.io/en/latest/) for several years. It's mature, stable, reliable and flexible.\n:::\n\n::::\n\n## DES in R\n\n::::{.columns}\n\n:::{.column width=60%}\n![](resources/simmer-hex-01.svg)\n:::\n\n:::{.column width=40%}\nR has the [simmer](https://r-simmer.org/) package.\n:::\n\n::::\n\n## HSMA Training on DES {.smaller}\n\n[{{< fa globe >}} Module Link](https://hsma-programme.github.io/hsma_site/hsma_content/modules/current_module_details/2_des.html)\n\n:::: {.columns}\n\n::: {.column width=\"30%\"}\n### Intro to DES\n\n- What DES is and where it may be useful\n- The key terminology associated with DES (e.g. resources, entities, sinks)\n- How to simplify a real-world pathway modelling problem into a conceptual model\n:::\n\n::: {.column width=\"5%\"}\n\n:::\n\n\n::: {.column width=\"30%\" .fragment}\n### SimPy for DES\n\n- The features of the SimPy package\n- How to write simple simulations with SimPy\n- Multi-step pathways\n- Branching pathways and optional steps\n:::\n\n::: {.column width=\"5%\"}\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n### Advanced Simpy\n\n- Warm-up Periods\n- Priority-based Queuing\n- Resource Unavailability\n- Lognormal Distributions\n- Reneging\n- Balking\n- Jockeying\n:::\n\n::::\n\n\n\n## The Little Book of DES\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n![](resources/des_cover_image.jpeg)\n:::\n\n::: {.column width=\"50%\"}\n\n:::\n\n::::\n\n[{{< fa globe>}} &nbsp; Click here to view the Little Book of DES](https://hsma-programme.github.io/hsma6_des_book/)\n\n## HSMA Training on web app interfaces with DES {.smaller}\n\n\n## The HSMA Book of Streamlit\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n![](resources/streamlit_cover_image.jpeg)\n:::\n\n::: {.column width=\"50%\"}\n\n:::\n\n::::\n\n[{{< fa globe>}} &nbsp; Click here to view the HSMA Book of Streamlit](https://bergam0t.github.io/streamlit_book/)\n\n\n## The HSMA Book of Streamlit\n\nThe book walks you through a range of Streamlit concepts, as well as providing a walk-through of how to create a simple front-end for any DES.\n\n![](assets/2024-11-18-09-26-40.png)\n\n## The DES Playground\n\n\n## Pathway Visualisation\n\nAs part of creating the DES playground, I put together the visualisation you saw in the previous slide.\n\nIt really resonated with people at the open day\n\nWe know that one of the big limitations of simpy (and other FOSS code-based options) is not being able to produce quick and simple visualisations to show to stakeholders.\n\n\n## The vidigi package\n\nThe [**vidigi**]() package is designed to be a flexible library for creating these animated visualisations for **any** simulation.\n\nUnder the hood, it makes use of plotly's animated scatterplots.\n\nHowever, it adds a range of additional helper functions to\n- process event logs into the format required\n- lay out the animation\n- add icons for resources and entities\n\n## Moving from this...\n\n```{python}\n#| output: false\nfrom examples.example_2_branching_multistep.ex_2_model_classes import Trial, g, event_position_df\nfrom vidigi.animation import animate_activity_log\nimport pandas as pd\n\n\ng.arrival_df = \"examples/example_2_branching_multistep/ed_arrivals.csv\"\n\nmy_trial = Trial()\nresult = my_trial.run_trial()\n```\n\n```{python}\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=True,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=24,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        custom_entity_icon_list=[\"üî¥\"],\n        custom_resource_icon=\"\"\n    )\n\nfig.show()\n```\n\n## ... to this\n\n```{python}\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=False,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=12,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        add_background_image=\"examples/example_2_branching_multistep/Full Model Background Image - Horizontal Layout.drawio.png\",\n    )\n\nfig.write_html(\"full_plot.html\", auto_play=True)\n```\n\n```{=html}\n\n```\n\n## Simulation Library\n\n\n\n\n\n## The STARS Framework\n\n![](resources/stars.png)\n\nReproducibility and reusability of models is crucial.\n\nI want to take a moment to highlight [STARS](https://github.com/pythonhealthdatascience)\n\nThis is a [UKRI-funded project](https://gtr.ukri.org/projects?ref=MR%2FZ503915%2F1) that is trying to ensure good reproducibility of healthcare simulation models.\n\n## The STARS Framework {.smaller}\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n:::  {.column width=\"45%\"}\n#### Essential Components\n\n- Open license\n- Dependency management\n- Model created using free and open-source software (FOSS)\n- Minimum documentation\n- Research artefact meta data (ORCID ID + citation information)\n- Remote code repository\n- Open science archive\n:::\n\n:::  {.column width=\"10%\"}\n\n:::\n\n:::  {.column width=\"45%\"}\n#### Optional Components\n\n- Enhanced documentation\n- Documentation hosting\n- Online coding environment\n- Model interface\n- Web app hosting\n:::\n\n::::\n\n\n## Summary\n"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","include-in-header":[{"text":"<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\"><link href='https://fonts.googleapis.com/css?family=Lexend' rel='stylesheet'>\n"}],"output-file":"nhsr_conf_2024_pres_des.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.6.36","auto-stretch":true,"title":"Unleashing the Power of Pathway Simulation","author":{"name":"Sammi Rosser","affiliation":"Health Service Modelling Associates Programme"},"viewDistance":100,"height":800,"width":1250,"transition":"slide","backgroundTransition":"fade","theme":["default","custom.scss"],"title-slide-attributes":{"data-background-image":"/resources/banner.png"}}}},"projectFormats":[]}