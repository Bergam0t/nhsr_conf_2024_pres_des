{"title":"Unleashing the Power of Pathway Simulation","markdown":{"yaml":{"title":"Unleashing the Power of Pathway Simulation","author":{"name":"Sammi Rosser","affiliation":"Health Service Modelling Associates Programme"},"format":{"revealjs":{"output-file":"index.html","view-distance":100,"height":800,"width":1250,"transition":"slide","plotly-connected":true,"background-transition":"fade","theme":["default","custom.scss"],"title-slide-attributes":{"data-background-image":"banner.png"},"include-in-header":[{"text":"<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\"><link href='https://fonts.googleapis.com/css?family=Lexend' rel='stylesheet'>\n"}]}}},"headingText":"About Me","containsRefs":false,"markdown":"\n\n\n```{python}\n#| output: false\nimport plotly\nimport plotly.io as pio\npio.renderers.default = \"plotly_mimetype+notebook_connected\"\n```\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n![](resources/profile.jpg)\n:::\n\n::: {.column width=\"60%\"}\n- Former NHS Analyst/Data Scientist\n- MSc Health Data Science @ Exeter\n- Now a HSMA trainer @ Exeter ([PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/)/[PenARC](https://arc-swp.nihr.ac.uk/))\n- Mainly a Pythonista these days<br/>(but I ‚ù§Ô∏è R too)\n- Obsessed with Quarto, Streamlit, Simulation, Maps & Dataviz\n:::\n\n[{{< fa brands linkedin >}} Add Me On LinkedIn](https://www.linkedin.com/in/sammijaderosser/)\n\n[{{< fa brands github >}} Follow Me On GitHub](https://github.com/Bergam0t)\n\n::::\n\n## {#about-hsma data-menu-title=\"About HSMA\"}\n\n:::: {.columns}\n\n::: {.column width=\"35%\"}\n![](resources/hsma_logo.png)\n\n![](resources/nihr_logo.png)\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"60%\" }\n\nThe Health Service Modelling Associates is a 15 month data science and operational research training and mentoring programme.\n</br></br>\nSupported by the NIHR PenARC and the NHS Digital Academy, the full programme is provided **free of charge** to people working in health, social care and policing and is accredited by AphA.\n</br></br>\n\n[{{< fa globe >}} Visit Our Website for Free Training](https://hsma-programme.github.io/hsma_site/)\n\n[{{< fa brands youtube >}} Subscribe to our YouTube Channel](https://www.youtube.com/@hsma)\n\n[{{< fa brands github >}} Follow us on GitHub](https://github.com/hsma-programme)\n:::\n\n\n::::\n\n\n# Part 1: Pathways\n\n## Pathway Simulation: Why?\n\n:::: {.columns}\n\n:::{.column width=\"40%\"}\n\n![](resources/long_hospital_queue.jpeg){height=400px}\n\n:::\n\n:::{.column width=\"60%\"}\n\nYour emergency department is struggling.\n\nYou could try a range of different things...\n\n::: {.incremental}\n- increase the number of staff available to register, triage or treat\n- increase the number of rooms or beds\n- increase the rate at which tests can be processed\n\n:::\n\n:::\n\n::::\n\n:::{.incremental}\n- add a new step in the process with a different kind of practitioner\n- completely redesign the pathway\n:::\n\n:::{.fragment .center}\n**Which of these is the right answer?**\n:::\n\n## Queue, Queue, Barney McGrew\n\nHealthcare tends to be **full** of queueing problems like this one.\n\n::: {.incremental}\n- People attending a walk-in clinic or emergency department\n- People calling a telephone-based service like 111 or a mental health crisis line\n- People on a cancer diagnosis and treatment pathway\n- People waiting to be assessed for ADHD and Autism, or on the waiting list for a gender clinic\n- People waiting for a series of treatment with a mental health practitioner\n    - might have one, several or many appointments\n:::\n\n## Pathway Parts\n\n::::{.columns}\n\n:::{.column width=50%}\n\nHealthcare systems are full of **resources**\n\n::: {.incremental}\n- People üë©üèª‚Äç‚öïÔ∏è üë©üèø‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë©üèæ‚Äç‚öïÔ∏è\n- Equipment üî¨ü©∫\n- Rooms & cubicles üè•\n- Beds üõåüèª üõåüèΩ üõåüèø üõåüèª üõåüèº üõåüèΩ üõåüèø\n- Treatments üíâ ü©π üíä\n- Vehicles üöë üöÅ üöó\n:::\n\n:::\n\n:::{.column width=50%}\n\n::: {.fragment}\n\nThese **resources** experience demand from **entities**.\n\nThese entities might be\n\n:::\n\n::: {.incremental}\n- People (in person) ü§í ü§¢ ü§ß\n- People (on the phone) ‚òéÔ∏è\n- Test Requests ü©ª üß™\n:::\n\n:::\n\n::::\n\n## Pathways and Queues\n\n\n::::{.columns}\n\n:::{.column width=23%}\nAs these entities move through a pathway - a series of steps where these resources are used - queues can build up where there isn't enough resource.\n:::\n\n:::{.column width=7%}\n:::\n\n:::{.column width=70%}\n![](assets/2024-11-18-10-12-15.png)\n:::\n\n::::\n\n## Queue What?\n\n```{=html}\n<br/>\n```\n\nAnd these pathways are often very **complicated**!\n\nThere are lots of moving parts, and lots of variation.\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n::: {.column width=\"30%\" .fragment}\n**Variation in when, and how frequently, people arrive**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in how long an activity in the pathway takes**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in the pathways people take within a single system**\n:::\n\n\n::::\n\n\n## The Problem with Pathways\n\nMaking changes to pathways can be\n\n- costly\n- slow\n- unsafe!\n\n:::{.fragment}\nAnd even if you do fix the original problem you were trying to solve, there's a risk of knock-on effects elsewhere in the pathway that you didn't foresee.\n:::\n\n## The Future Problems with Pathways\n\nAnd even if you avoid that....\n\nA system that is coping now might *not* cope\n\n:::{.incremental}\n- all the time\n- if demand increases\n- if resource temporarily decreases\n:::\n\n\n## It's All a Simulation\n\n\nOn HSMA, we teach a couple of different **computer simulation** techniques.\n\n:::: {.columns}\n\n::: {.column width=\"27%\" .fragment}\n\n### System Dynamics\n\nHigh-level technique that's often suited to uncovering fundamental issues with pathway or wider healthcare system design\n\n:::\n\n::: {.column width=\"5%\" .fragment}\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:600px\"></div>\n```\n\n:::\n\n\n::: {.column width=\"30%\" .fragment}\n\n### Agent-Based Simulation (ABS)\n\nIndividual-level modelling that is particularly interested in the impact of individuals' decisions and interactions\n\n:::\n\n\n::: {.column width='5%' .fragment}\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:600px\">\n</div>\n```\n\n:::\n\n\n\n::: {.column width=\"33%\" .fragment}\n\n### Discrete Event Simulation (DES)\n\nModelling focussing on the flow of entities through a pathway and use of resources, allowing detailed investigation of capacity, queues and waits\n\n:::\n\n::::\n\n\n\n## It's Our DEStiny\n\n::::{.columns}\n\n:::{.column width=25%}\n</br></br>\nWhat we generally want to tackle our pathway problems in healthcare is **Discrete Event Simulation (DES)**<br/>\n\n:::\n\n\n:::{.column width=5%}\n```{=html}\n<div style=\"border-left:3px solid #fff;height:700px\"></div>\n```\n:::\n\n:::{.column width=70%}\n\n::: {.center}\n\nIn a DES...\n:::\n\n![](assets/2024-11-18-09-41-27.png)\n:::\n\n::::\n\n## DES to the Rescue\n\nDES is so powerful because it gives us an in-silico (computer-based) reproduction of our pathway to play around with.\n<br/><br/>\nWe can make any change we want<br/>*(e.g. more resources, higher demand, new pathway design)*<br/>**safely and for free** and see what impact it has on any metric we care to measure:\n\n- how long people wait at each step of the pathway\n- people meeting targets (e.g. 4 hour wait)\n- how much of the time the resources are utilised for\n```{=html}\n<br/><br/>\n```\nAnd so on!\n\n## Randomness\n\nThat randomness in our healthcare systems that we mentioned before? DES can cope really well with that!\n\n```{=html}\n<br/>\n```\n\n\n:::: {.columns  .fragment}\n\n::: {.column width=\"45%\"}\n\nWe can hold the random patterns consistent and **change resource levels or pathway design**\n\n:::\n\n::: {.column width=\"10%\" }\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:250px\"></div>\n```\n\n:::\n\n::: {.column width=\"45%\" }\n\nWe can hold resources or pathway design consistent and **allow randomness**\n\n:::\n\n::::\n\n\n```{=html}\n<br/>\n```\n\n\n\n:::: {.columns .fragment}\n\n::: {.column width=\"45%\" }\n\nThis allows us to be sure the changes we're testing really are responsible for the differences\n\n:::\n\n::: {.column width=\"10%\" }\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:250px\"></div>\n```\n\n:::\n\n::: {.column width=\"45%\" }\n\nThis allows us to test our system in multiple parallel universes, running it **tens** or even **hundreds** of times!\n\n:::\n\n::::\n\n\n## Exploring Impacts\n\nIn our models, we can then summarise the performance of a given set of parameters across multiple runs.\n\n![](assets/2024-11-18-18-52-06.png)\n\n## Digging Into Results\n\nWe can start to explore the variation in performance across runs too.\n\n![](assets/2024-11-18-18-52-30.png)\n\n## Comparing Performance\n\nAnd we can provide visualiations to compare the impact of changing parameters - here, for example, adding one extra stabilisation bay.\n\n![](assets/2024-11-18-18-54-56.png)\n\n\n## A Note About Modelling\n\nYour DES won't be a perfect one-to-one reproduction of the pathway you are modelling.\n\nWe have to make certain assumptions and simplifications, and we can't capture every complexity.\n\n\n::::{.columns}\n\n\n:::{.column width=45%}\n\n\nHowever...\n\n<br/><br/>\n\n\n> All models are wrong, but some are useful\n\n‚Ä¢ George E. P. Box\n\n:::\n\n\n:::{.column width=10%}\n\n:::\n\n\n:::{.column width=45%}\n\n![](assets/box_pixel.jpeg){height=450px}\n\n:::\n\n\n::::\n\n\n\n# Example DES Projects\n\n\n## DES is popular!\n\n- On the HSMA programme, we've had over 35 projects using DES in some capacity\n<br/><br/>\n- A third of the registered projects this year use DES\n(as opposed to machine learning, ABS, system dynamics, natural language processing, geographical modelling)\n<br/><br/>\n- It's also frequently used in the [PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/) team\n\n## Example 1: Bladder Cancer Pathway\n\nIn this [PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/) project, a DES model of the bladder cancer pathway at Royal Cornwall Hospitals Trust (RCHT) exposed two key system bottlenecks.\n\n- A delay between patients being referred and receiving their surgery\n- A delay waiting for the nurse specialist to contact the patient to discuss their diagnosis and treatment options\n\nThe model was used to support an on-the-spot rewrite of the pathway, resulting in multi-week reductions to waiting times.\n<br/><br/>\n[{{< fa globe >}} Find Out More](https://arc-swp.nihr.ac.uk/research/projects/penchord-streamlining-the-bladder-cancer-pathway-at-rcht/)\n\n\n## Example 2: Vaccination Clinic\n\nThis [HSMA](https://hsma-programme.github.io/hsma_site/) project looked at the design of a COVID-19 vaccination clinic in North Devon, exploring\n\n- queue lengths\n- car park capacity\n- times for each step of the vaccination process\n\nThe model identified potential issues with the original proposed plans, and was used to refine the plans to enable a safe but efficient delivery of the vaccination programme.\n<br/><br/>\n[{{< fa globe >}} Find Out More](https://hsma-programme.github.io/hsma_site/previous_projects/hsma_3/h3_generic_vaccination/)\n\n## Example 3: Emergency Department Model\n\nThis [HSMA](https://hsma-programme.github.io/hsma_site/) project looked at ways to improve Urgent Treatment Care (UTC) performance. The team wanted to know\n\n- What further staff and resources would be required for any variations in patient attendance\n- How changes in the patient pathway would reduce bottlenecks</br> (e.g what would be the impact of front-loading diagnostics?)\n\nThe model identified a need for additional rooms and the ED was redesigned as a result.\n<br/><br/>\n[{{< fa globe >}} Find Out More](https://hsma-programme.github.io/hsma_site/previous_projects/hsma_3/h3_generic_vaccination/)\n\n\n## Example 4: Mental Health Assessment Pathway Model\n\nThis [PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/) project created a simulation model of a mental health assessment pathway.\n\nThe trust in question was piloting an approach that would allow patients to book their appointments themselves.\n\nThe model was used to help\n\n- predict the number of appointment slots required at each site\n- show that allowing queue-sharing between smaller groups of sites would significantly reduce the wait times\n\n[{{< fa globe >}} Find Out More](https://arc-swp.nihr.ac.uk/publications/scheduling-community-mental-health-assessment-in-devon/)\n\n\n## Example 5: Children's Neurodiversity Assessment Pathway\n\nThis [HSMA](https://hsma-programme.github.io/hsma_site/) project created a model of a paediatric neurodevelopmental (ADHD + autism) pathway. Waits had increased to a 2 years on average.\n\nThe team wanted to understand\n\n- where current bottlenecks in the process were\n- what level of staffing would be needed to clear the existing backlog and maintain a steady state\n\nThe model showed that recruiting an extra lead clinician would not address the bottleneck - but an additional second assessor would.\n\n[{{< fa globe >}} Find Out More](https://hsma-programme.github.io/hsma_site/previous_projects/hsma_4/h4_des_adhd_autism_pathway/)\n\n\n## Other Projects\n\nYou can find details about all of our previous and current Discrete Event Simulation projects [{{< fa globe >}} on the HSMA website](https://hsma-programme.github.io/hsma_site/previous_projects/projects_by_methods.html#discrete-event-simulation)\n\n![](assets/cfN8dkSYNB.gif)\n\n# Doing your Own DES Projects\n\n## The DES Playground\n\nThis site was designed to help teach the **key concepts** of discrete event simulation to non-technical beginners.\n\n::::{.columns}\n\n:::{.column width=\"80%\"}\n\n![](assets/chrome_2RNEIsSXoP.gif)\n\n:::\n\n:::{.column width=\"20%\"}\n\n[{{< fa globe>}} &nbsp; Click here to visit!](https://hsma-programme.github.io/Teaching_DES_Concepts_Streamlit)\n\n<br/>\n\nIt uses browser-based Python, so calculations can be slow on mobile devices and won't work on Firefox!\n\n\n:::\n\n::::\n\n\n\n## Drag & Drop\n\nThere are various paid, closed-source drag-and-drop software tools for doing DES (but we won't talk about them here).\n\nIf you don't code, there is the free and open source (FOSS) tool [JaamSim](https://jaamsim.com/).\n\n![](assets/2024-11-18-10-15-22.png)\n\n\n## DES in R\n\n::::{.columns}\n\n:::{.column width=60%}\n\n![](resources/simmer-hex-01.svg){height=500px}\n\n:::\n\n\n:::{.column width=40%}\n\n<br/><br/>\n\nR has the [simmer](https://r-simmer.org/) package.\n\n:::\n\n::::\n\n\n\n## DES in Python\n\nIn Python, there are a range of packages for DES.\n\n::::{.columns}\n\n:::{.column width=40%}\n\n![](assets/2024-11-18-10-19-04.png)\n\n:::\n\n:::{.column width=60%}\n\n[Salabim](https://github.com/salabim/salabim) is quite popular.\n\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n\n![](assets/2024-11-18-10-16-14.png)\n\n:::\n\n:::{.column width=60%}\n\nI've also heard good things about [ciw](https://github.com/CiwPython/Ciw)\n\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n\n![](assets/2024-11-18-10-17-01.png)\n\n:::\n\n:::{.column width=60%}\n\nBut HSMA has used and taught [simpy](https://simpy.readthedocs.io/en/latest/) for several years. It's mature, stable, reliable and flexible.\n\n:::\n\n::::\n\n\n## HSMA Training on DES {.smaller}\n\nThe DES lectures and activities from this year's HSMA can be found on our website.\n\n[{{< fa globe >}} Module Link](https://hsma-programme.github.io/hsma_site/hsma_content/modules/current_module_details/2_des.html)\n\n\n:::: {.columns}\n\n::: {.column width=\"30%\"}\n\n### Intro to DES\n\n‚Ä¢ What DES is and where it may be useful\n\n‚Ä¢ The key terminology associated with DES e.g. resources, entities, sinks\n\n‚Ä¢ How to simplify a real-world pathway modelling problem into a conceptual model\n\n:::\n\n\n::: {.column width=\"5%\"}\n\n:::\n\n\n::: {.column width=\"30%\" .fragment}\n\n### SimPy for DES\n\n‚Ä¢ The features of the SimPy package\n\n‚Ä¢ How to write simple simulations with SimPy\n\n‚Ä¢ Multi-step pathways\n\n‚Ä¢ Branching pathways and optional steps\n\n:::\n\n::: {.column width=\"5%\"}\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n\n### Advanced Simpy\n\n‚Ä¢ Warm-up Periods\n\n‚Ä¢ Priority-based Queuing\n\n‚Ä¢ Resource Unavailability\n\n‚Ä¢ Lognormal Distributions\n\n‚Ä¢ Reneging\n\n‚Ä¢ Balking\n\n‚Ä¢ Jockeying\n\n:::\n\n::::\n\n## The Little Book of DES\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n![](resources/des_cover_image.jpeg)\n\n[{{< fa globe>}} &nbsp; Click here to view the eBook](https://hsma-programme.github.io/hsma6_des_book/)\n\n:::\n\n::: {.column width=\"50%\"}\n\nWe have also put together a **free eBook** that serves as a handy reference to doing DES with SimPy.\n\nIt's packed with code snippets you can use and modify and goes beyond the lecture content, including\n\n‚Ä¢ appointment-based models\n‚Ä¢ reproducibility\n‚Ä¢ parallelisation\n‚Ä¢ and more!\n\n:::\n\n::::\n\n\n## HSMA Training on Web App Interfaces for DES {.smaller}\n\n::::{.columns}\n\n:::{.column width=23%}\n\nWhile creating these models and running a range of parameters yourself can be really powerful, getting the models into the hands of stakeholders can really enhance their adoption.\n<br/><br/>\nFrameworks like [Streamlit](https://streamlit.io/) can help you to quickly create interactive web app front-ends for your app.\n\n:::\n\n:::{.column width=3%}\n\n:::\n\n:::{.column width=74%}\n\n![](assets/chrome_CdAZUpS295.gif)\n\n:::\n\n::::\n\n\n## The HSMA Book of Streamlit\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n![](resources/streamlit_cover_image.jpeg)\n\n:::\n\n::: {.column width=\"50%\"}\n\nThis free eBook walks you through a range of Streamlit concepts.\n<br/><br/>\nIt then goes on to providing a walk-through of how to create a simple front-end for any DES and deploying that on a free online hosting platform.\n\n:::\n\n::::\n\n[{{< fa globe>}} &nbsp; Click here to view the eBook](https://bergam0t.github.io/streamlit_book/)\n\n\n\n## Pathway Visualisation\n\nAs part of creating the DES playground, I put together the visualisation you saw in the previous slide.\n<br/><br/>\nIt really resonated with people - so we wanted to make more use of it!\n<br/><br/>\nWe know that one of the big limitations of simpy (and other FOSS code-based options) is not being able to produce **quick and simple** visualisations to show to stakeholders.\n\n\n## The vidigi package\n\nThe [**vidigi**](https://pypi.org/project/vidigi/) package is designed to be a flexible library for creating these animated visualisations for **any** simulation.\n\nUnder the hood, it makes use of [Plotly's](https://plotly.com/python/) animated scatterplots.\n\nHowever, it adds a range of additional helper functions to\n\n- process event logs into the format required\n- lay out the animation\n- add icons for resources and entities\n\nIt's hosted on PyPI - so you can `pip install` it!\n\n\n```{python}\n#| echo: true\n#| eval: false\n#| code-line-numbers: false\npip install vidigi\n```\n\n## Moving from this...\n\n```{python}\n#| output: false\n#| eval: false\nfrom examples.example_2_branching_multistep.ex_2_model_classes import Trial, g, event_position_df\nfrom vidigi.animation import animate_activity_log\nimport pandas as pd\n\ng.arrival_df = \"examples/example_2_branching_multistep/ed_arrivals.csv\"\n\nmy_trial = Trial()\nresult = my_trial.run_trial()\n```\n\n```{python}\n#| eval: false\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=True,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=12,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        custom_entity_icon_list=[\"üî¥\"],\n        custom_resource_icon=\"\"\n    )\n\nfig.show()\n\n# Due to inability to autoplay above, embedding as gif\n\n```\n\n![](assets/firefox_mrlo2ZZy2D.gif)\n\n## ... to this\n\n```{python}\n#| eval: false\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=False,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=12,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        add_background_image=\"https://raw.githubusercontent.com/Bergam0t/nhsr_conf_2024_pres_des/refs/heads/main/examples/example_2_branching_multistep/Full%20Model%20Background%20Image%20-%20Horizontal%20Layout.drawio.png\",\n    )\n\nfig.show()\n\n# Due to inability to autoplay above, embedding as gif\n```\n\n![](assets/firefox_WQjMAS0YvL.gif)\n\n## Simulation Library\n\n:::{.callout-warning appearance=\"minimal\"}\nThis is an early-stage piece of work!\n:::\n\nTo go along with vidigi, I'm working on collating and visualising models from across healthcare systems.\n\nAt present, there is\n\n- A simple emergency department\n- An orthopaedic surgery unit\n- A simple community-based service with a single appointment\n- A complex community-based service with varying numbers of appointments and a per-clinician caseload\n\n[{{< fa brands github>}} &nbsp; Click here for the code repository](https://github.com/hsma-programme/simpy_visualisation/tree/main/examples)\n\n[{{< fa globe>}} &nbsp; Click here to try them out](https://simpy-visualisation.streamlit.app/)\n\n\n## Model Reproducibility\n\n![](resources/stars.png)\n\nReproducibility and reusability of models is crucial.\n\nI want to take a moment to highlight [STARS](https://github.com/pythonhealthdatascience)\n\nThis is a [UKRI-funded project](https://gtr.ukri.org/projects?ref=MR%2FZ503915%2F1) that is trying to ensure good reproducibility of healthcare simulation models.\n\nThey are also creating examples in Python and R, as well as creating open-source versions of closed-source models from published scientific papers.\n\n## The STARS Framework {.smaller}\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n:::  {.column width=\"45%\"}\n#### Essential Components\n\n- Open license\n- Dependency management\n- Model created using free and open-source software (FOSS)\n- Minimum documentation\n- Research artefact meta data (ORCID ID + citation information)\n- Remote code repository\n- Open science archive\n:::\n\n:::  {.column width=\"10%\"}\n\n:::\n\n:::  {.column width=\"45%\"}\n#### Optional Components\n\n- Enhanced documentation\n- Documentation hosting\n- Online coding environment\n- Model interface\n- Web app hosting\n:::\n\n::::\n\n\n# End of Simulation\n\n## Summary\n\n- DES is an amazing option for tackling your pathway problems\n<br/><br/>\n- With ever-growing resources and community experience out there, it's a great time to get started\n<br/><br/>\n- FOSS libraries allow us to adapt and reuse models - but follow guidance to make it as easy as possible for people to stand on your shoulders!\n","srcMarkdownNoYaml":"\n\n## About Me\n\n```{python}\n#| output: false\nimport plotly\nimport plotly.io as pio\npio.renderers.default = \"plotly_mimetype+notebook_connected\"\n```\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n![](resources/profile.jpg)\n:::\n\n::: {.column width=\"60%\"}\n- Former NHS Analyst/Data Scientist\n- MSc Health Data Science @ Exeter\n- Now a HSMA trainer @ Exeter ([PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/)/[PenARC](https://arc-swp.nihr.ac.uk/))\n- Mainly a Pythonista these days<br/>(but I ‚ù§Ô∏è R too)\n- Obsessed with Quarto, Streamlit, Simulation, Maps & Dataviz\n:::\n\n[{{< fa brands linkedin >}} Add Me On LinkedIn](https://www.linkedin.com/in/sammijaderosser/)\n\n[{{< fa brands github >}} Follow Me On GitHub](https://github.com/Bergam0t)\n\n::::\n\n## {#about-hsma data-menu-title=\"About HSMA\"}\n\n:::: {.columns}\n\n::: {.column width=\"35%\"}\n![](resources/hsma_logo.png)\n\n![](resources/nihr_logo.png)\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"60%\" }\n\nThe Health Service Modelling Associates is a 15 month data science and operational research training and mentoring programme.\n</br></br>\nSupported by the NIHR PenARC and the NHS Digital Academy, the full programme is provided **free of charge** to people working in health, social care and policing and is accredited by AphA.\n</br></br>\n\n[{{< fa globe >}} Visit Our Website for Free Training](https://hsma-programme.github.io/hsma_site/)\n\n[{{< fa brands youtube >}} Subscribe to our YouTube Channel](https://www.youtube.com/@hsma)\n\n[{{< fa brands github >}} Follow us on GitHub](https://github.com/hsma-programme)\n:::\n\n\n::::\n\n\n# Part 1: Pathways\n\n## Pathway Simulation: Why?\n\n:::: {.columns}\n\n:::{.column width=\"40%\"}\n\n![](resources/long_hospital_queue.jpeg){height=400px}\n\n:::\n\n:::{.column width=\"60%\"}\n\nYour emergency department is struggling.\n\nYou could try a range of different things...\n\n::: {.incremental}\n- increase the number of staff available to register, triage or treat\n- increase the number of rooms or beds\n- increase the rate at which tests can be processed\n\n:::\n\n:::\n\n::::\n\n:::{.incremental}\n- add a new step in the process with a different kind of practitioner\n- completely redesign the pathway\n:::\n\n:::{.fragment .center}\n**Which of these is the right answer?**\n:::\n\n## Queue, Queue, Barney McGrew\n\nHealthcare tends to be **full** of queueing problems like this one.\n\n::: {.incremental}\n- People attending a walk-in clinic or emergency department\n- People calling a telephone-based service like 111 or a mental health crisis line\n- People on a cancer diagnosis and treatment pathway\n- People waiting to be assessed for ADHD and Autism, or on the waiting list for a gender clinic\n- People waiting for a series of treatment with a mental health practitioner\n    - might have one, several or many appointments\n:::\n\n## Pathway Parts\n\n::::{.columns}\n\n:::{.column width=50%}\n\nHealthcare systems are full of **resources**\n\n::: {.incremental}\n- People üë©üèª‚Äç‚öïÔ∏è üë©üèø‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üë©üèæ‚Äç‚öïÔ∏è\n- Equipment üî¨ü©∫\n- Rooms & cubicles üè•\n- Beds üõåüèª üõåüèΩ üõåüèø üõåüèª üõåüèº üõåüèΩ üõåüèø\n- Treatments üíâ ü©π üíä\n- Vehicles üöë üöÅ üöó\n:::\n\n:::\n\n:::{.column width=50%}\n\n::: {.fragment}\n\nThese **resources** experience demand from **entities**.\n\nThese entities might be\n\n:::\n\n::: {.incremental}\n- People (in person) ü§í ü§¢ ü§ß\n- People (on the phone) ‚òéÔ∏è\n- Test Requests ü©ª üß™\n:::\n\n:::\n\n::::\n\n## Pathways and Queues\n\n\n::::{.columns}\n\n:::{.column width=23%}\nAs these entities move through a pathway - a series of steps where these resources are used - queues can build up where there isn't enough resource.\n:::\n\n:::{.column width=7%}\n:::\n\n:::{.column width=70%}\n![](assets/2024-11-18-10-12-15.png)\n:::\n\n::::\n\n## Queue What?\n\n```{=html}\n<br/>\n```\n\nAnd these pathways are often very **complicated**!\n\nThere are lots of moving parts, and lots of variation.\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n::: {.column width=\"30%\" .fragment}\n**Variation in when, and how frequently, people arrive**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in how long an activity in the pathway takes**\n:::\n\n::: {.column width=\"5%\" }\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n**Variation in the pathways people take within a single system**\n:::\n\n\n::::\n\n\n## The Problem with Pathways\n\nMaking changes to pathways can be\n\n- costly\n- slow\n- unsafe!\n\n:::{.fragment}\nAnd even if you do fix the original problem you were trying to solve, there's a risk of knock-on effects elsewhere in the pathway that you didn't foresee.\n:::\n\n## The Future Problems with Pathways\n\nAnd even if you avoid that....\n\nA system that is coping now might *not* cope\n\n:::{.incremental}\n- all the time\n- if demand increases\n- if resource temporarily decreases\n:::\n\n\n## It's All a Simulation\n\n\nOn HSMA, we teach a couple of different **computer simulation** techniques.\n\n:::: {.columns}\n\n::: {.column width=\"27%\" .fragment}\n\n### System Dynamics\n\nHigh-level technique that's often suited to uncovering fundamental issues with pathway or wider healthcare system design\n\n:::\n\n::: {.column width=\"5%\" .fragment}\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:600px\"></div>\n```\n\n:::\n\n\n::: {.column width=\"30%\" .fragment}\n\n### Agent-Based Simulation (ABS)\n\nIndividual-level modelling that is particularly interested in the impact of individuals' decisions and interactions\n\n:::\n\n\n::: {.column width='5%' .fragment}\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:600px\">\n</div>\n```\n\n:::\n\n\n\n::: {.column width=\"33%\" .fragment}\n\n### Discrete Event Simulation (DES)\n\nModelling focussing on the flow of entities through a pathway and use of resources, allowing detailed investigation of capacity, queues and waits\n\n:::\n\n::::\n\n\n\n## It's Our DEStiny\n\n::::{.columns}\n\n:::{.column width=25%}\n</br></br>\nWhat we generally want to tackle our pathway problems in healthcare is **Discrete Event Simulation (DES)**<br/>\n\n:::\n\n\n:::{.column width=5%}\n```{=html}\n<div style=\"border-left:3px solid #fff;height:700px\"></div>\n```\n:::\n\n:::{.column width=70%}\n\n::: {.center}\n\nIn a DES...\n:::\n\n![](assets/2024-11-18-09-41-27.png)\n:::\n\n::::\n\n## DES to the Rescue\n\nDES is so powerful because it gives us an in-silico (computer-based) reproduction of our pathway to play around with.\n<br/><br/>\nWe can make any change we want<br/>*(e.g. more resources, higher demand, new pathway design)*<br/>**safely and for free** and see what impact it has on any metric we care to measure:\n\n- how long people wait at each step of the pathway\n- people meeting targets (e.g. 4 hour wait)\n- how much of the time the resources are utilised for\n```{=html}\n<br/><br/>\n```\nAnd so on!\n\n## Randomness\n\nThat randomness in our healthcare systems that we mentioned before? DES can cope really well with that!\n\n```{=html}\n<br/>\n```\n\n\n:::: {.columns  .fragment}\n\n::: {.column width=\"45%\"}\n\nWe can hold the random patterns consistent and **change resource levels or pathway design**\n\n:::\n\n::: {.column width=\"10%\" }\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:250px\"></div>\n```\n\n:::\n\n::: {.column width=\"45%\" }\n\nWe can hold resources or pathway design consistent and **allow randomness**\n\n:::\n\n::::\n\n\n```{=html}\n<br/>\n```\n\n\n\n:::: {.columns .fragment}\n\n::: {.column width=\"45%\" }\n\nThis allows us to be sure the changes we're testing really are responsible for the differences\n\n:::\n\n::: {.column width=\"10%\" }\n\n```{=html}\n<div style=\"border-left:3px solid #fff;height:250px\"></div>\n```\n\n:::\n\n::: {.column width=\"45%\" }\n\nThis allows us to test our system in multiple parallel universes, running it **tens** or even **hundreds** of times!\n\n:::\n\n::::\n\n\n## Exploring Impacts\n\nIn our models, we can then summarise the performance of a given set of parameters across multiple runs.\n\n![](assets/2024-11-18-18-52-06.png)\n\n## Digging Into Results\n\nWe can start to explore the variation in performance across runs too.\n\n![](assets/2024-11-18-18-52-30.png)\n\n## Comparing Performance\n\nAnd we can provide visualiations to compare the impact of changing parameters - here, for example, adding one extra stabilisation bay.\n\n![](assets/2024-11-18-18-54-56.png)\n\n\n## A Note About Modelling\n\nYour DES won't be a perfect one-to-one reproduction of the pathway you are modelling.\n\nWe have to make certain assumptions and simplifications, and we can't capture every complexity.\n\n\n::::{.columns}\n\n\n:::{.column width=45%}\n\n\nHowever...\n\n<br/><br/>\n\n\n> All models are wrong, but some are useful\n\n‚Ä¢ George E. P. Box\n\n:::\n\n\n:::{.column width=10%}\n\n:::\n\n\n:::{.column width=45%}\n\n![](assets/box_pixel.jpeg){height=450px}\n\n:::\n\n\n::::\n\n\n\n# Example DES Projects\n\n\n## DES is popular!\n\n- On the HSMA programme, we've had over 35 projects using DES in some capacity\n<br/><br/>\n- A third of the registered projects this year use DES\n(as opposed to machine learning, ABS, system dynamics, natural language processing, geographical modelling)\n<br/><br/>\n- It's also frequently used in the [PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/) team\n\n## Example 1: Bladder Cancer Pathway\n\nIn this [PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/) project, a DES model of the bladder cancer pathway at Royal Cornwall Hospitals Trust (RCHT) exposed two key system bottlenecks.\n\n- A delay between patients being referred and receiving their surgery\n- A delay waiting for the nurse specialist to contact the patient to discuss their diagnosis and treatment options\n\nThe model was used to support an on-the-spot rewrite of the pathway, resulting in multi-week reductions to waiting times.\n<br/><br/>\n[{{< fa globe >}} Find Out More](https://arc-swp.nihr.ac.uk/research/projects/penchord-streamlining-the-bladder-cancer-pathway-at-rcht/)\n\n\n## Example 2: Vaccination Clinic\n\nThis [HSMA](https://hsma-programme.github.io/hsma_site/) project looked at the design of a COVID-19 vaccination clinic in North Devon, exploring\n\n- queue lengths\n- car park capacity\n- times for each step of the vaccination process\n\nThe model identified potential issues with the original proposed plans, and was used to refine the plans to enable a safe but efficient delivery of the vaccination programme.\n<br/><br/>\n[{{< fa globe >}} Find Out More](https://hsma-programme.github.io/hsma_site/previous_projects/hsma_3/h3_generic_vaccination/)\n\n## Example 3: Emergency Department Model\n\nThis [HSMA](https://hsma-programme.github.io/hsma_site/) project looked at ways to improve Urgent Treatment Care (UTC) performance. The team wanted to know\n\n- What further staff and resources would be required for any variations in patient attendance\n- How changes in the patient pathway would reduce bottlenecks</br> (e.g what would be the impact of front-loading diagnostics?)\n\nThe model identified a need for additional rooms and the ED was redesigned as a result.\n<br/><br/>\n[{{< fa globe >}} Find Out More](https://hsma-programme.github.io/hsma_site/previous_projects/hsma_3/h3_generic_vaccination/)\n\n\n## Example 4: Mental Health Assessment Pathway Model\n\nThis [PenCHORD](https://arc-swp.nihr.ac.uk/research-and-implementation/research-teams/penchord/) project created a simulation model of a mental health assessment pathway.\n\nThe trust in question was piloting an approach that would allow patients to book their appointments themselves.\n\nThe model was used to help\n\n- predict the number of appointment slots required at each site\n- show that allowing queue-sharing between smaller groups of sites would significantly reduce the wait times\n\n[{{< fa globe >}} Find Out More](https://arc-swp.nihr.ac.uk/publications/scheduling-community-mental-health-assessment-in-devon/)\n\n\n## Example 5: Children's Neurodiversity Assessment Pathway\n\nThis [HSMA](https://hsma-programme.github.io/hsma_site/) project created a model of a paediatric neurodevelopmental (ADHD + autism) pathway. Waits had increased to a 2 years on average.\n\nThe team wanted to understand\n\n- where current bottlenecks in the process were\n- what level of staffing would be needed to clear the existing backlog and maintain a steady state\n\nThe model showed that recruiting an extra lead clinician would not address the bottleneck - but an additional second assessor would.\n\n[{{< fa globe >}} Find Out More](https://hsma-programme.github.io/hsma_site/previous_projects/hsma_4/h4_des_adhd_autism_pathway/)\n\n\n## Other Projects\n\nYou can find details about all of our previous and current Discrete Event Simulation projects [{{< fa globe >}} on the HSMA website](https://hsma-programme.github.io/hsma_site/previous_projects/projects_by_methods.html#discrete-event-simulation)\n\n![](assets/cfN8dkSYNB.gif)\n\n# Doing your Own DES Projects\n\n## The DES Playground\n\nThis site was designed to help teach the **key concepts** of discrete event simulation to non-technical beginners.\n\n::::{.columns}\n\n:::{.column width=\"80%\"}\n\n![](assets/chrome_2RNEIsSXoP.gif)\n\n:::\n\n:::{.column width=\"20%\"}\n\n[{{< fa globe>}} &nbsp; Click here to visit!](https://hsma-programme.github.io/Teaching_DES_Concepts_Streamlit)\n\n<br/>\n\nIt uses browser-based Python, so calculations can be slow on mobile devices and won't work on Firefox!\n\n\n:::\n\n::::\n\n\n\n## Drag & Drop\n\nThere are various paid, closed-source drag-and-drop software tools for doing DES (but we won't talk about them here).\n\nIf you don't code, there is the free and open source (FOSS) tool [JaamSim](https://jaamsim.com/).\n\n![](assets/2024-11-18-10-15-22.png)\n\n\n## DES in R\n\n::::{.columns}\n\n:::{.column width=60%}\n\n![](resources/simmer-hex-01.svg){height=500px}\n\n:::\n\n\n:::{.column width=40%}\n\n<br/><br/>\n\nR has the [simmer](https://r-simmer.org/) package.\n\n:::\n\n::::\n\n\n\n## DES in Python\n\nIn Python, there are a range of packages for DES.\n\n::::{.columns}\n\n:::{.column width=40%}\n\n![](assets/2024-11-18-10-19-04.png)\n\n:::\n\n:::{.column width=60%}\n\n[Salabim](https://github.com/salabim/salabim) is quite popular.\n\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n\n![](assets/2024-11-18-10-16-14.png)\n\n:::\n\n:::{.column width=60%}\n\nI've also heard good things about [ciw](https://github.com/CiwPython/Ciw)\n\n:::\n\n::::\n\n::::{.columns}\n\n:::{.column width=40%}\n\n![](assets/2024-11-18-10-17-01.png)\n\n:::\n\n:::{.column width=60%}\n\nBut HSMA has used and taught [simpy](https://simpy.readthedocs.io/en/latest/) for several years. It's mature, stable, reliable and flexible.\n\n:::\n\n::::\n\n\n## HSMA Training on DES {.smaller}\n\nThe DES lectures and activities from this year's HSMA can be found on our website.\n\n[{{< fa globe >}} Module Link](https://hsma-programme.github.io/hsma_site/hsma_content/modules/current_module_details/2_des.html)\n\n\n:::: {.columns}\n\n::: {.column width=\"30%\"}\n\n### Intro to DES\n\n‚Ä¢ What DES is and where it may be useful\n\n‚Ä¢ The key terminology associated with DES e.g. resources, entities, sinks\n\n‚Ä¢ How to simplify a real-world pathway modelling problem into a conceptual model\n\n:::\n\n\n::: {.column width=\"5%\"}\n\n:::\n\n\n::: {.column width=\"30%\" .fragment}\n\n### SimPy for DES\n\n‚Ä¢ The features of the SimPy package\n\n‚Ä¢ How to write simple simulations with SimPy\n\n‚Ä¢ Multi-step pathways\n\n‚Ä¢ Branching pathways and optional steps\n\n:::\n\n::: {.column width=\"5%\"}\n\n:::\n\n::: {.column width=\"30%\" .fragment}\n\n### Advanced Simpy\n\n‚Ä¢ Warm-up Periods\n\n‚Ä¢ Priority-based Queuing\n\n‚Ä¢ Resource Unavailability\n\n‚Ä¢ Lognormal Distributions\n\n‚Ä¢ Reneging\n\n‚Ä¢ Balking\n\n‚Ä¢ Jockeying\n\n:::\n\n::::\n\n## The Little Book of DES\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n![](resources/des_cover_image.jpeg)\n\n[{{< fa globe>}} &nbsp; Click here to view the eBook](https://hsma-programme.github.io/hsma6_des_book/)\n\n:::\n\n::: {.column width=\"50%\"}\n\nWe have also put together a **free eBook** that serves as a handy reference to doing DES with SimPy.\n\nIt's packed with code snippets you can use and modify and goes beyond the lecture content, including\n\n‚Ä¢ appointment-based models\n‚Ä¢ reproducibility\n‚Ä¢ parallelisation\n‚Ä¢ and more!\n\n:::\n\n::::\n\n\n## HSMA Training on Web App Interfaces for DES {.smaller}\n\n::::{.columns}\n\n:::{.column width=23%}\n\nWhile creating these models and running a range of parameters yourself can be really powerful, getting the models into the hands of stakeholders can really enhance their adoption.\n<br/><br/>\nFrameworks like [Streamlit](https://streamlit.io/) can help you to quickly create interactive web app front-ends for your app.\n\n:::\n\n:::{.column width=3%}\n\n:::\n\n:::{.column width=74%}\n\n![](assets/chrome_CdAZUpS295.gif)\n\n:::\n\n::::\n\n\n## The HSMA Book of Streamlit\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n![](resources/streamlit_cover_image.jpeg)\n\n:::\n\n::: {.column width=\"50%\"}\n\nThis free eBook walks you through a range of Streamlit concepts.\n<br/><br/>\nIt then goes on to providing a walk-through of how to create a simple front-end for any DES and deploying that on a free online hosting platform.\n\n:::\n\n::::\n\n[{{< fa globe>}} &nbsp; Click here to view the eBook](https://bergam0t.github.io/streamlit_book/)\n\n\n\n## Pathway Visualisation\n\nAs part of creating the DES playground, I put together the visualisation you saw in the previous slide.\n<br/><br/>\nIt really resonated with people - so we wanted to make more use of it!\n<br/><br/>\nWe know that one of the big limitations of simpy (and other FOSS code-based options) is not being able to produce **quick and simple** visualisations to show to stakeholders.\n\n\n## The vidigi package\n\nThe [**vidigi**](https://pypi.org/project/vidigi/) package is designed to be a flexible library for creating these animated visualisations for **any** simulation.\n\nUnder the hood, it makes use of [Plotly's](https://plotly.com/python/) animated scatterplots.\n\nHowever, it adds a range of additional helper functions to\n\n- process event logs into the format required\n- lay out the animation\n- add icons for resources and entities\n\nIt's hosted on PyPI - so you can `pip install` it!\n\n\n```{python}\n#| echo: true\n#| eval: false\n#| code-line-numbers: false\npip install vidigi\n```\n\n## Moving from this...\n\n```{python}\n#| output: false\n#| eval: false\nfrom examples.example_2_branching_multistep.ex_2_model_classes import Trial, g, event_position_df\nfrom vidigi.animation import animate_activity_log\nimport pandas as pd\n\ng.arrival_df = \"examples/example_2_branching_multistep/ed_arrivals.csv\"\n\nmy_trial = Trial()\nresult = my_trial.run_trial()\n```\n\n```{python}\n#| eval: false\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=True,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=12,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        custom_entity_icon_list=[\"üî¥\"],\n        custom_resource_icon=\"\"\n    )\n\nfig.show()\n\n# Due to inability to autoplay above, embedding as gif\n\n```\n\n![](assets/firefox_mrlo2ZZy2D.gif)\n\n## ... to this\n\n```{python}\n#| eval: false\nfig = animate_activity_log(\n        event_log=my_trial.all_event_logs[my_trial.all_event_logs['run']==1],\n        event_position_df=event_position_df,\n        scenario=g(),\n        setup_mode=False,\n        debug_mode=False,\n        every_x_time_units=5,\n        include_play_button=True,\n        gap_between_entities=10,\n        gap_between_rows=15,\n        plotly_height=650,\n        plotly_width=950,\n        override_x_max=700,\n        override_y_max=675,\n        icon_and_text_size=12,\n        wrap_queues_at=10,\n        step_snapshot_max=50,\n        limit_duration=g.sim_duration,\n        time_display_units=\"dhm\",\n        display_stage_labels=False,\n        add_background_image=\"https://raw.githubusercontent.com/Bergam0t/nhsr_conf_2024_pres_des/refs/heads/main/examples/example_2_branching_multistep/Full%20Model%20Background%20Image%20-%20Horizontal%20Layout.drawio.png\",\n    )\n\nfig.show()\n\n# Due to inability to autoplay above, embedding as gif\n```\n\n![](assets/firefox_WQjMAS0YvL.gif)\n\n## Simulation Library\n\n:::{.callout-warning appearance=\"minimal\"}\nThis is an early-stage piece of work!\n:::\n\nTo go along with vidigi, I'm working on collating and visualising models from across healthcare systems.\n\nAt present, there is\n\n- A simple emergency department\n- An orthopaedic surgery unit\n- A simple community-based service with a single appointment\n- A complex community-based service with varying numbers of appointments and a per-clinician caseload\n\n[{{< fa brands github>}} &nbsp; Click here for the code repository](https://github.com/hsma-programme/simpy_visualisation/tree/main/examples)\n\n[{{< fa globe>}} &nbsp; Click here to try them out](https://simpy-visualisation.streamlit.app/)\n\n\n## Model Reproducibility\n\n![](resources/stars.png)\n\nReproducibility and reusability of models is crucial.\n\nI want to take a moment to highlight [STARS](https://github.com/pythonhealthdatascience)\n\nThis is a [UKRI-funded project](https://gtr.ukri.org/projects?ref=MR%2FZ503915%2F1) that is trying to ensure good reproducibility of healthcare simulation models.\n\nThey are also creating examples in Python and R, as well as creating open-source versions of closed-source models from published scientific papers.\n\n## The STARS Framework {.smaller}\n\n```{=html}\n<br/>\n```\n\n:::: {.columns}\n\n:::  {.column width=\"45%\"}\n#### Essential Components\n\n- Open license\n- Dependency management\n- Model created using free and open-source software (FOSS)\n- Minimum documentation\n- Research artefact meta data (ORCID ID + citation information)\n- Remote code repository\n- Open science archive\n:::\n\n:::  {.column width=\"10%\"}\n\n:::\n\n:::  {.column width=\"45%\"}\n#### Optional Components\n\n- Enhanced documentation\n- Documentation hosting\n- Online coding environment\n- Model interface\n- Web app hosting\n:::\n\n::::\n\n\n# End of Simulation\n\n## Summary\n\n- DES is an amazing option for tackling your pathway problems\n<br/><br/>\n- With ever-growing resources and community experience out there, it's a great time to get started\n<br/><br/>\n- FOSS libraries allow us to adapt and reuse models - but follow guidance to make it as easy as possible for people to stand on your shoulders!\n"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","output-file":"index.html","include-in-header":[{"text":"<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\"><link href='https://fonts.googleapis.com/css?family=Lexend' rel='stylesheet'>\n"}]},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.6.36","auto-stretch":true,"title":"Unleashing the Power of Pathway Simulation","author":{"name":"Sammi Rosser","affiliation":"Health Service Modelling Associates Programme"},"viewDistance":100,"height":800,"width":1250,"transition":"slide","backgroundTransition":"fade","theme":["default","custom.scss"],"title-slide-attributes":{"data-background-image":"banner.png"}}}},"projectFormats":[]}